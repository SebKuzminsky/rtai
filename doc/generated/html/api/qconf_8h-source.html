<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>RTAI API: base/config/kconfig/qconf.h Source File</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.3.9.1 -->
<div class="qindex">  <form class="search" action="search.php" method="get">
<a class="qindex" href="main.html">Main&nbsp;Page</a> | <a class="qindex" href="modules.html">Modules</a> | <a class="qindex" href="files.html">File&nbsp;List</a> | <a class="qindex" href="globals.html">Globals</a> | <a class="qindex" href="pages.html">Related&nbsp;Pages</a>  | <span class="search"><u>S</u>earch&nbsp;for&nbsp;<input class="search" type="text" name="query" value="" size="20" accesskey="s"/></span></form></div>
<div class="nav">
<a class="el" href="dir_000000.html">base</a>&nbsp;/&nbsp;<a class="el" href="dir_000012.html">config</a>&nbsp;/&nbsp;<a class="el" href="dir_000013.html">kconfig</a></div>
<h1>qconf.h</h1><div class="fragment"><pre class="fragment">00001 <span class="comment">/*</span>
00002 <span class="comment"> * Copyright (C) 2002 Roman Zippel &lt;zippel@linux-m68k.org&gt;</span>
00003 <span class="comment"> * Released under the terms of the GNU GPL v2.0.</span>
00004 <span class="comment"> */</span>
00005 
00006 <span class="preprocessor">#include &lt;qlistview.h&gt;</span>
00007 
00008 <span class="keyword">class </span>ConfigList;
00009 <span class="keyword">class </span>ConfigItem;
00010 <span class="keyword">class </span>ConfigLineEdit;
00011 <span class="keyword">class </span>ConfigMainWindow;
00012 
00013 <span class="keyword">class </span>ConfigView : <span class="keyword">public</span> QVBox {
00014         Q_OBJECT
00015         <span class="keyword">typedef</span> <span class="keyword">class </span>QVBox Parent;
00016 <span class="keyword">public</span>:
00017         ConfigView(QWidget* parent, ConfigMainWindow* cview);
00018         ~ConfigView(<span class="keywordtype">void</span>);
00019         <span class="keyword">static</span> <span class="keywordtype">void</span> updateList(ConfigItem* item);
00020         <span class="keyword">static</span> <span class="keywordtype">void</span> updateListAll(<span class="keywordtype">void</span>);
00021 
00022 <span class="keyword">public</span>:
00023         ConfigList* list;
00024         ConfigLineEdit* lineEdit;
00025 
00026         <span class="keyword">static</span> ConfigView* viewList;
00027         ConfigView* nextView;
00028 };
00029 
00030 <span class="keyword">enum</span> colIdx {
00031         promptColIdx, nameColIdx, noColIdx, modColIdx, yesColIdx, dataColIdx, colNr
00032 };
00033 <span class="keyword">enum</span> listMode {
00034         singleMode, menuMode, symbolMode, fullMode
00035 };
00036 
00037 <span class="keyword">class </span>ConfigList : <span class="keyword">public</span> QListView {
00038         Q_OBJECT
00039         <span class="keyword">typedef</span> <span class="keyword">class </span>QListView Parent;
00040 <span class="keyword">public</span>:
00041         ConfigList(ConfigView* p, ConfigMainWindow* cview);
00042         <span class="keywordtype">void</span> reinit(<span class="keywordtype">void</span>);
00043         ConfigView* parent(<span class="keywordtype">void</span>)<span class="keyword"> const</span>
00044 <span class="keyword">        </span>{
00045                 <span class="keywordflow">return</span> (ConfigView*)Parent::parent();
00046         }
00047 
00048 <span class="keyword">protected</span>:
00049         ConfigMainWindow* cview;
00050 
00051         <span class="keywordtype">void</span> keyPressEvent(QKeyEvent *e);
00052         <span class="keywordtype">void</span> contentsMousePressEvent(QMouseEvent *e);
00053         <span class="keywordtype">void</span> contentsMouseReleaseEvent(QMouseEvent *e);
00054         <span class="keywordtype">void</span> contentsMouseMoveEvent(QMouseEvent *e);
00055         <span class="keywordtype">void</span> contentsMouseDoubleClickEvent(QMouseEvent *e);
00056         <span class="keywordtype">void</span> focusInEvent(QFocusEvent *e);
00057 <span class="keyword">public</span> slots:
00058         <span class="keywordtype">void</span> setRootMenu(<span class="keyword">struct</span> menu *menu);
00059 
00060         <span class="keywordtype">void</span> updateList(ConfigItem *item);
00061         <span class="keywordtype">void</span> setValue(ConfigItem* item, tristate val);
00062         <span class="keywordtype">void</span> changeValue(ConfigItem* item);
00063         <span class="keywordtype">void</span> updateSelection(<span class="keywordtype">void</span>);
00064 signals:
00065         <span class="keywordtype">void</span> menuSelected(<span class="keyword">struct</span> menu *menu);
00066         <span class="keywordtype">void</span> parentSelected(<span class="keywordtype">void</span>);
00067         <span class="keywordtype">void</span> gotFocus(<span class="keywordtype">void</span>);
00068 
00069 <span class="keyword">public</span>:
00070         <span class="keywordtype">void</span> updateListAll(<span class="keywordtype">void</span>)
00071         {
00072                 updateAll = <span class="keyword">true</span>;
00073                 updateList(NULL);
00074                 updateAll = <span class="keyword">false</span>;
00075         }
00076         ConfigList* listView()
00077         {
00078                 <span class="keywordflow">return</span> <span class="keyword">this</span>;
00079         }
00080         ConfigItem* firstChild()<span class="keyword"> const</span>
00081 <span class="keyword">        </span>{
00082                 <span class="keywordflow">return</span> (ConfigItem *)Parent::firstChild();
00083         }
00084         <span class="keywordtype">int</span> mapIdx(colIdx idx)
00085         {
00086                 <span class="keywordflow">return</span> colMap[idx];
00087         }
00088         <span class="keywordtype">void</span> addColumn(colIdx idx, <span class="keyword">const</span> QString&amp; label)
00089         {
00090                 colMap[idx] = Parent::addColumn(label);
00091                 colRevMap[colMap[idx]] = idx;
00092         }
00093         <span class="keywordtype">void</span> removeColumn(colIdx idx)
00094         {
00095                 <span class="keywordtype">int</span> col = colMap[idx];
00096                 <span class="keywordflow">if</span> (col &gt;= 0) {
00097                         Parent::removeColumn(col);
00098                         colRevMap[col] = colMap[idx] = -1;
00099                 }
00100         }
00101         <span class="keywordtype">void</span> setAllOpen(<span class="keywordtype">bool</span> open);
00102         <span class="keywordtype">void</span> setParentMenu(<span class="keywordtype">void</span>);
00103 
00104         <span class="keyword">template</span> &lt;<span class="keyword">class</span> P&gt;
00105         <span class="keywordtype">void</span> ConfigList::updateMenuList(P*, <span class="keyword">struct</span> menu*);
00106 
00107         <span class="keywordtype">bool</span> updateAll;
00108 
00109         QPixmap symbolYesPix, symbolModPix, symbolNoPix;
00110         QPixmap choiceYesPix, choiceNoPix;
00111         QPixmap menuPix, menuInvPix, menuBackPix, voidPix;
00112 
00113         <span class="keywordtype">bool</span> showAll, showName, showRange, showData;
00114         <span class="keyword">enum</span> listMode mode;
00115         <span class="keyword">struct </span>menu *rootEntry;
00116         QColorGroup disabledColorGroup;
00117         QColorGroup inactivedColorGroup;
00118 
00119 <span class="keyword">private</span>:
00120         <span class="keywordtype">int</span> colMap[colNr];
00121         <span class="keywordtype">int</span> colRevMap[colNr];
00122 };
00123 
00124 <span class="keyword">class </span>ConfigItem : <span class="keyword">public</span> QListViewItem {
00125         <span class="keyword">typedef</span> <span class="keyword">class </span>QListViewItem Parent;
00126 <span class="keyword">public</span>:
00127         ConfigItem(QListView *parent, ConfigItem *after, <span class="keyword">struct</span> menu *m, <span class="keywordtype">bool</span> v)
00128         : Parent(parent, after), menu(m), visible(v), goParent(false)
00129         {
00130                 init();
00131         }
00132         ConfigItem(ConfigItem *parent, ConfigItem *after, <span class="keyword">struct</span> menu *m, <span class="keywordtype">bool</span> v)
00133         : Parent(parent, after), menu(m), visible(v), goParent(false)
00134         {
00135                 init();
00136         }
00137         ConfigItem(QListView *parent, ConfigItem *after, <span class="keywordtype">bool</span> v)
00138         : Parent(parent, after), menu(0), visible(v), goParent(true)
00139         {
00140                 init();
00141         }
00142         ~ConfigItem(<span class="keywordtype">void</span>);
00143         <span class="keywordtype">void</span> init(<span class="keywordtype">void</span>);
00144 <span class="preprocessor">#if QT_VERSION &gt;= 300</span>
00145 <span class="preprocessor"></span>        <span class="keywordtype">void</span> okRename(<span class="keywordtype">int</span> col);
00146 <span class="preprocessor">#endif</span>
00147 <span class="preprocessor"></span>        <span class="keywordtype">void</span> updateMenu(<span class="keywordtype">void</span>);
00148         <span class="keywordtype">void</span> testUpdateMenu(<span class="keywordtype">bool</span> v);
00149         ConfigList* listView()<span class="keyword"> const</span>
00150 <span class="keyword">        </span>{
00151                 <span class="keywordflow">return</span> (ConfigList*)Parent::listView();
00152         }
00153         ConfigItem* firstChild()<span class="keyword"> const</span>
00154 <span class="keyword">        </span>{
00155                 <span class="keywordflow">return</span> (ConfigItem *)Parent::firstChild();
00156         }
00157         ConfigItem* nextSibling()<span class="keyword"> const</span>
00158 <span class="keyword">        </span>{
00159                 <span class="keywordflow">return</span> (ConfigItem *)Parent::nextSibling();
00160         }
00161         <span class="keywordtype">void</span> setText(colIdx idx, <span class="keyword">const</span> QString&amp; text)
00162         {
00163                 Parent::setText(listView()-&gt;mapIdx(idx), text);
00164         }
00165         QString text(colIdx idx)<span class="keyword"> const</span>
00166 <span class="keyword">        </span>{
00167                 <span class="keywordflow">return</span> Parent::text(listView()-&gt;mapIdx(idx));
00168         }
00169         <span class="keywordtype">void</span> setPixmap(colIdx idx, <span class="keyword">const</span> QPixmap&amp; pm)
00170         {
00171                 Parent::setPixmap(listView()-&gt;mapIdx(idx), pm);
00172         }
00173         <span class="keyword">const</span> QPixmap* pixmap(colIdx idx)<span class="keyword"> const</span>
00174 <span class="keyword">        </span>{
00175                 <span class="keywordflow">return</span> Parent::pixmap(listView()-&gt;mapIdx(idx));
00176         }
00177         <span class="keywordtype">void</span> paintCell(QPainter* p, <span class="keyword">const</span> QColorGroup&amp; cg, <span class="keywordtype">int</span> column, <span class="keywordtype">int</span> width, <span class="keywordtype">int</span> align);
00178 
00179         ConfigItem* nextItem;
00180         <span class="keyword">struct </span>menu *menu;
00181         <span class="keywordtype">bool</span> visible;
00182         <span class="keywordtype">bool</span> goParent;
00183 };
00184 
00185 <span class="keyword">class </span>ConfigLineEdit : <span class="keyword">public</span> QLineEdit {
00186         Q_OBJECT
00187         <span class="keyword">typedef</span> <span class="keyword">class </span>QLineEdit Parent;
00188 <span class="keyword">public</span>:
00189         ConfigLineEdit(ConfigView* parent)
00190         : Parent(parent)
00191         { }
00192         ConfigView* parent(<span class="keywordtype">void</span>)<span class="keyword"> const</span>
00193 <span class="keyword">        </span>{
00194                 <span class="keywordflow">return</span> (ConfigView*)Parent::parent();
00195         }
00196         <span class="keywordtype">void</span> show(ConfigItem *i);
00197         <span class="keywordtype">void</span> keyPressEvent(QKeyEvent *e);
00198 
00199 <span class="keyword">public</span>:
00200         ConfigItem *item;
00201 };
00202 
00203 <span class="keyword">class </span>ConfigMainWindow : <span class="keyword">public</span> QMainWindow {
00204         Q_OBJECT
00205 <span class="keyword">public</span>:
00206         ConfigMainWindow(<span class="keywordtype">void</span>);
00207 <span class="keyword">public</span> slots:
00208         <span class="keywordtype">void</span> setHelp(QListViewItem* item);
00209         <span class="keywordtype">void</span> changeMenu(<span class="keyword">struct</span> menu *);
00210         <span class="keywordtype">void</span> listFocusChanged(<span class="keywordtype">void</span>);
00211         <span class="keywordtype">void</span> goBack(<span class="keywordtype">void</span>);
00212         <span class="keywordtype">void</span> loadConfig(<span class="keywordtype">void</span>);
00213         <span class="keywordtype">void</span> saveConfig(<span class="keywordtype">void</span>);
00214         <span class="keywordtype">void</span> saveConfigAs(<span class="keywordtype">void</span>);
00215         <span class="keywordtype">void</span> showSingleView(<span class="keywordtype">void</span>);
00216         <span class="keywordtype">void</span> showSplitView(<span class="keywordtype">void</span>);
00217         <span class="keywordtype">void</span> showFullView(<span class="keywordtype">void</span>);
00218         <span class="keywordtype">void</span> setShowAll(<span class="keywordtype">bool</span>);
00219         <span class="keywordtype">void</span> setShowDebug(<span class="keywordtype">bool</span>);
00220         <span class="keywordtype">void</span> setShowRange(<span class="keywordtype">bool</span>);
00221         <span class="keywordtype">void</span> setShowName(<span class="keywordtype">bool</span>);
00222         <span class="keywordtype">void</span> setShowData(<span class="keywordtype">bool</span>);
00223         <span class="keywordtype">void</span> showIntro(<span class="keywordtype">void</span>);
00224         <span class="keywordtype">void</span> showAbout(<span class="keywordtype">void</span>);
00225 
00226 <span class="keyword">protected</span>:
00227         <span class="keywordtype">void</span> closeEvent(QCloseEvent *e);
00228 
00229         ConfigView *menuView;
00230         ConfigList *menuList;
00231         ConfigView *configView;
00232         ConfigList *configList;
00233         QTextView *helpText;
00234         QToolBar *toolBar;
00235         QAction *backAction;
00236 
00237         <span class="keywordtype">bool</span> showDebug;
00238 };
</pre></div><hr size="1"><address style="align: right;"><small>Generated on Tue Jan 18 22:53:51 2005 for RTAI API by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border="0"></a> 1.3.9.1 </small></address>
</body>
</html>
