<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>RTAI API: base/include/rtai_usi.h Source File</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.3.9.1 -->
<div class="qindex">  <form class="search" action="search.php" method="get">
<a class="qindex" href="main.html">Main&nbsp;Page</a> | <a class="qindex" href="modules.html">Modules</a> | <a class="qindex" href="files.html">File&nbsp;List</a> | <a class="qindex" href="globals.html">Globals</a> | <a class="qindex" href="pages.html">Related&nbsp;Pages</a>  | <span class="search"><u>S</u>earch&nbsp;for&nbsp;<input class="search" type="text" name="query" value="" size="20" accesskey="s"/></span></form></div>
<div class="nav">
<a class="el" href="dir_000000.html">base</a>&nbsp;/&nbsp;<a class="el" href="dir_000015.html">include</a></div>
<h1>rtai_usi.h</h1><div class="fragment"><pre class="fragment">00001 <span class="comment">/*</span>
00002 <span class="comment"> * Copyright (C) 1999-2003 Paolo Mantegazza &lt;mantegazza@aero.polimi.it&gt;</span>
00003 <span class="comment"> *</span>
00004 <span class="comment"> * This program is free software; you can redistribute it and/or</span>
00005 <span class="comment"> * modify it under the terms of the GNU General Public License as</span>
00006 <span class="comment"> * published by the Free Software Foundation; either version 2 of the</span>
00007 <span class="comment"> * License, or (at your option) any later version.</span>
00008 <span class="comment"> *</span>
00009 <span class="comment"> * This program is distributed in the hope that it will be useful,</span>
00010 <span class="comment"> * but WITHOUT ANY WARRANTY; without even the implied warranty of</span>
00011 <span class="comment"> * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the</span>
00012 <span class="comment"> * GNU General Public License for more details.</span>
00013 <span class="comment"> *</span>
00014 <span class="comment"> * You should have received a copy of the GNU General Public License</span>
00015 <span class="comment"> * along with this program; if not, write to the Free Software</span>
00016 <span class="comment"> * Foundation, Inc., 59 Temple Place - Suite 330, Boston, MA 02111-1307, USA.</span>
00017 <span class="comment"> */</span>
00018 
00019 <span class="preprocessor">#ifndef _RTAI_USI_H</span>
00020 <span class="preprocessor"></span><span class="preprocessor">#define _RTAI_USI_H</span>
00021 <span class="preprocessor"></span>
00022 <span class="preprocessor">#include &lt;rtai_types.h&gt;</span>
00023 
00024 <span class="preprocessor">#define  FUN_USI_LXRT_INDX 3</span>
00025 <span class="preprocessor"></span>
00026 <span class="preprocessor">#define _STARTUP_IRQ             1</span>
00027 <span class="preprocessor"></span><span class="preprocessor">#define _SHUTDOWN_IRQ            2</span>
00028 <span class="preprocessor"></span><span class="preprocessor">#define _ENABLE_IRQ              3</span>
00029 <span class="preprocessor"></span><span class="preprocessor">#define _DISABLE_IRQ             4</span>
00030 <span class="preprocessor"></span><span class="preprocessor">#define _MASK_AND_ACK_IRQ        5</span>
00031 <span class="preprocessor"></span><span class="preprocessor">#define _ACK_IRQ                 6</span>
00032 <span class="preprocessor"></span><span class="preprocessor">#define _UNMASK_IRQ              7</span>
00033 <span class="preprocessor"></span><span class="preprocessor">#define _INIT_SPIN_LOCK          8</span>
00034 <span class="preprocessor"></span><span class="preprocessor">#define _SPIN_LOCK               9</span>
00035 <span class="preprocessor"></span><span class="preprocessor">#define _SPIN_UNLOCK            10</span>
00036 <span class="preprocessor"></span><span class="preprocessor">#define _SPIN_LOCK_IRQ          11</span>
00037 <span class="preprocessor"></span><span class="preprocessor">#define _SPIN_UNLOCK_IRQ        12</span>
00038 <span class="preprocessor"></span><span class="preprocessor">#define _SPIN_LOCK_IRQSV        13</span>
00039 <span class="preprocessor"></span><span class="preprocessor">#define _SPIN_UNLOCK_IRQRST     14</span>
00040 <span class="preprocessor"></span><span class="preprocessor">#define _GLB_CLI                15</span>
00041 <span class="preprocessor"></span><span class="preprocessor">#define _GLB_STI                16</span>
00042 <span class="preprocessor"></span><span class="preprocessor">#define _GLB_SVFLAGS_CLI        17</span>
00043 <span class="preprocessor"></span><span class="preprocessor">#define _GLB_SVFLAGS            18</span>
00044 <span class="preprocessor"></span><span class="preprocessor">#define _GLB_RSTFLAGS           19</span>
00045 <span class="preprocessor"></span><span class="preprocessor">#define _CLI                    20</span>
00046 <span class="preprocessor"></span><span class="preprocessor">#define _STI                    21</span>
00047 <span class="preprocessor"></span><span class="preprocessor">#define _SVFLAGS_CLI            22</span>
00048 <span class="preprocessor"></span><span class="preprocessor">#define _SVFLAGS                23</span>
00049 <span class="preprocessor"></span><span class="preprocessor">#define _RSTFLAGS               24</span>
00050 <span class="preprocessor"></span>
00051 <span class="preprocessor">#ifdef __KERNEL__</span>
00052 <span class="preprocessor"></span>
00053 <span class="preprocessor">#ifdef __cplusplus</span>
00054 <span class="preprocessor"></span><span class="keyword">extern</span> <span class="stringliteral">"C"</span> {
00055 <span class="preprocessor">#endif </span><span class="comment">/* __cplusplus */</span>
00056 
00057 <span class="keywordtype">int</span> __rtai_usi_init(<span class="keywordtype">void</span>);
00058 
00059 <span class="keywordtype">void</span> __rtai_usi_exit(<span class="keywordtype">void</span>);
00060 
00061 <span class="preprocessor">#ifdef __cplusplus</span>
00062 <span class="preprocessor"></span>}
00063 <span class="preprocessor">#endif </span><span class="comment">/* __cplusplus */</span>
00064 
00065 <span class="preprocessor">#else </span><span class="comment">/* !__KERNEL__ */</span>
00066 
00067 <span class="preprocessor">#include &lt;<a class="code" href="rtai__lxrt_8h.html">rtai_lxrt.h</a>&gt;</span>
00068 
00069 <span class="preprocessor">#ifdef __cplusplus</span>
00070 <span class="preprocessor"></span><span class="keyword">extern</span> <span class="stringliteral">"C"</span> {
00071 <span class="preprocessor">#endif </span><span class="comment">/* __cplusplus */</span>
00072 
00073  
00074 RTAI_PROTO(<span class="keywordtype">int</span>, rt_startup_irq,(<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> irq))
00075 {
00076         <span class="keyword">struct </span>{ <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> irq; } arg = { irq };
00077         <span class="keywordflow">return</span> rtai_lxrt(FUN_USI_LXRT_INDX, SIZARG, _STARTUP_IRQ, &amp;arg).i[LOW];
00078 }
00079  
00080 RTAI_PROTO(<span class="keywordtype">void</span>, rt_shutdown_irq,(<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> irq))
00081 {
00082         <span class="keyword">struct </span>{ <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> irq; } arg = { irq };
00083         rtai_lxrt(FUN_USI_LXRT_INDX, SIZARG, _SHUTDOWN_IRQ, &amp;arg);
00084 }
00085  
00086 RTAI_PROTO(<span class="keywordtype">void</span>, rt_enable_irq,(<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> irq))
00087 {
00088         <span class="keyword">struct </span>{ <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> irq; } arg = { irq };
00089         rtai_lxrt(FUN_USI_LXRT_INDX, SIZARG, _ENABLE_IRQ, &amp;arg);
00090 }
00091  
00092 RTAI_PROTO(<span class="keywordtype">void</span>, rt_disable_irq,(<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> irq))
00093 {
00094         <span class="keyword">struct </span>{ <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> irq; } arg = { irq };
00095         rtai_lxrt(FUN_USI_LXRT_INDX, SIZARG, _DISABLE_IRQ, &amp;arg);
00096 }
00097  
00098 RTAI_PROTO(<span class="keywordtype">void</span>, rt_mask_and_ack_irq,(<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> irq))
00099 {
00100         <span class="keyword">struct </span>{ <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> irq; } arg = { irq };
00101         rtai_lxrt(FUN_USI_LXRT_INDX, SIZARG, _MASK_AND_ACK_IRQ, &amp;arg);
00102 }
00103  
00104 RTAI_PROTO(<span class="keywordtype">void</span>, rt_ack_irq,(<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> irq))
00105 {
00106         <span class="keyword">struct </span>{ <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> irq; } arg = { irq };
00107         rtai_lxrt(FUN_USI_LXRT_INDX, SIZARG, _ACK_IRQ, &amp;arg);
00108 }
00109  
00110 RTAI_PROTO(<span class="keywordtype">void</span>, rt_unmask_irq,(<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> irq))
00111 {
00112         <span class="keyword">struct </span>{ <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> irq; } arg = { irq };
00113         rtai_lxrt(FUN_USI_LXRT_INDX, SIZARG, _UNMASK_IRQ, &amp;arg);
00114 }
00115  
00116 RTAI_PROTO(<span class="keywordtype">void</span> *, rt_spin_lock_init,(<span class="keywordtype">void</span>))
00117 {
00118         <span class="keyword">struct </span>{ <span class="keywordtype">int</span> dummy; } arg = { 0 };
00119         <span class="keywordflow">return</span> rtai_lxrt(FUN_USI_LXRT_INDX, SIZARG, _INIT_SPIN_LOCK, &amp;arg).v[LOW];
00120 }
00121  
00122 RTAI_PROTO(<span class="keywordtype">void</span>, rt_spin_lock,(<span class="keywordtype">void</span> *lock))
00123 {
00124         <span class="keyword">struct </span>{ <span class="keywordtype">void</span> *lock; } arg = { lock };
00125         rtai_lxrt(FUN_USI_LXRT_INDX, SIZARG, _SPIN_LOCK, &amp;arg);
00126 }
00127  
00128 RTAI_PROTO(<span class="keywordtype">void</span>, rt_spin_unlock,(<span class="keywordtype">void</span> *lock))
00129 {
00130         <span class="keyword">struct </span>{ <span class="keywordtype">void</span> *lock; } arg = { lock };
00131         rtai_lxrt(FUN_USI_LXRT_INDX, SIZARG, _SPIN_UNLOCK, &amp;arg);
00132 }
00133  
00134 RTAI_PROTO(<span class="keywordtype">void</span>, rt_spin_lock_irq,(<span class="keywordtype">void</span> *lock))
00135 {
00136         <span class="keyword">struct </span>{ <span class="keywordtype">void</span> *lock; } arg = { lock };
00137         rtai_lxrt(FUN_USI_LXRT_INDX, SIZARG, _SPIN_LOCK_IRQ, &amp;arg);
00138 }
00139  
00140 RTAI_PROTO(<span class="keywordtype">void</span>, rt_spin_unlock_irq,(<span class="keywordtype">void</span> *lock))
00141 {
00142         <span class="keyword">struct </span>{ <span class="keywordtype">void</span> *lock; } arg = { lock };
00143         rtai_lxrt(FUN_USI_LXRT_INDX, SIZARG, _SPIN_UNLOCK_IRQ, &amp;arg);
00144 }
00145  
00146 RTAI_PROTO(<span class="keywordtype">unsigned</span> <span class="keywordtype">long</span>, rt_spin_lock_irqsave,(<span class="keywordtype">void</span> *lock))
00147 {
00148         <span class="keyword">struct </span>{ <span class="keywordtype">void</span> *lock; } arg = { lock };
00149         <span class="keywordflow">return</span> rtai_lxrt(FUN_USI_LXRT_INDX, SIZARG, _SPIN_LOCK_IRQSV, &amp;arg).i[LOW];
00150 }
00151  
00152 RTAI_PROTO(<span class="keywordtype">void</span>, rt_spin_unlock_irqrestore,(<span class="keywordtype">unsigned</span> <span class="keywordtype">long</span> flags, <span class="keywordtype">void</span> *lock))
00153 {
00154         <span class="keyword">struct </span>{ <span class="keywordtype">unsigned</span> <span class="keywordtype">long</span> flags; <span class="keywordtype">void</span> *lock; } arg = { flags, lock };
00155         rtai_lxrt(FUN_USI_LXRT_INDX, SIZARG, _SPIN_UNLOCK_IRQRST, &amp;arg);
00156 }
00157  
00158 
00159 RTAI_PROTO(<span class="keywordtype">void</span>, rt_global_cli,(<span class="keywordtype">void</span>))
00160 {
00161         <span class="keyword">struct </span>{ <span class="keywordtype">int</span> dummy; } arg = { 0 };
00162         rtai_lxrt(FUN_USI_LXRT_INDX, SIZARG, _GLB_CLI, &amp;arg);
00163 }
00164 
00165 RTAI_PROTO(<span class="keywordtype">void</span>, rt_global_sti,(<span class="keywordtype">void</span>))
00166 {
00167         <span class="keyword">struct </span>{ <span class="keywordtype">int</span> dummy; } arg = { 0 };
00168         rtai_lxrt(FUN_USI_LXRT_INDX, SIZARG, _GLB_STI, &amp;arg);
00169 }
00170 
00171 RTAI_PROTO(<span class="keywordtype">unsigned</span> <span class="keywordtype">long</span>, rt_global_save_flags_and_cli,(<span class="keywordtype">void</span>))
00172 {
00173         <span class="keyword">struct </span>{ <span class="keywordtype">int</span> dummy; } arg = { 0 };
00174         <span class="keywordflow">return</span> rtai_lxrt(FUN_USI_LXRT_INDX, SIZARG, _GLB_SVFLAGS_CLI, &amp;arg).i[LOW];
00175 }
00176  
00177 RTAI_PROTO(<span class="keywordtype">unsigned</span> <span class="keywordtype">long</span>, rt_global_save_flags,(<span class="keywordtype">void</span>))
00178 {
00179         <span class="keyword">struct </span>{ <span class="keywordtype">int</span> dummy; } arg = { 0 };
00180         <span class="keywordflow">return</span> rtai_lxrt(FUN_USI_LXRT_INDX, SIZARG, _GLB_SVFLAGS, &amp;arg).i[LOW];
00181 }
00182  
00183 RTAI_PROTO(<span class="keywordtype">void</span>, rt_global_restore_flags,(<span class="keywordtype">unsigned</span> <span class="keywordtype">long</span> flags))
00184 {
00185         <span class="keyword">struct </span>{ <span class="keywordtype">unsigned</span> <span class="keywordtype">long</span> flags; } arg = { flags };
00186         rtai_lxrt(FUN_USI_LXRT_INDX, SIZARG, _GLB_RSTFLAGS, &amp;arg);
00187 }
00188 
00189 RTAI_PROTO(<span class="keywordtype">void</span>, rtai_cli,(<span class="keywordtype">void</span>))
00190 {
00191         <span class="keyword">struct </span>{ <span class="keywordtype">int</span> dummy; } arg = { 0 };
00192         rtai_lxrt(FUN_USI_LXRT_INDX, SIZARG, _CLI, &amp;arg);
00193 }
00194 
00195 RTAI_PROTO(<span class="keywordtype">void</span>, rtai_sti,(<span class="keywordtype">void</span>))
00196 {
00197         <span class="keyword">struct </span>{ <span class="keywordtype">int</span> dummy; } arg = { 0 };
00198         rtai_lxrt(FUN_USI_LXRT_INDX, SIZARG, _STI, &amp;arg);
00199 }
00200 
00201 RTAI_PROTO(<span class="keywordtype">unsigned</span> <span class="keywordtype">long</span>, rtai_save_flags_and_cli,(<span class="keywordtype">void</span>))
00202 {
00203         <span class="keyword">struct </span>{ <span class="keywordtype">int</span> dummy; } arg = { 0 };
00204         <span class="keywordflow">return</span> rtai_lxrt(FUN_USI_LXRT_INDX, SIZARG, _SVFLAGS_CLI, &amp;arg).i[LOW];
00205 }
00206  
00207 RTAI_PROTO(<span class="keywordtype">unsigned</span> <span class="keywordtype">long</span>, rtai_save_flags,(<span class="keywordtype">void</span>))
00208 {
00209         <span class="keyword">struct </span>{ <span class="keywordtype">int</span> dummy; } arg = { 0 };
00210         <span class="keywordflow">return</span> rtai_lxrt(FUN_USI_LXRT_INDX, SIZARG, _SVFLAGS, &amp;arg).i[LOW];
00211 }
00212  
00213 RTAI_PROTO(<span class="keywordtype">void</span>, rtai_restore_flags,(<span class="keywordtype">unsigned</span> <span class="keywordtype">long</span> flags))
00214 {
00215         <span class="keyword">struct </span>{ <span class="keywordtype">unsigned</span> <span class="keywordtype">long</span> flags; } arg = { flags };
00216         rtai_lxrt(FUN_USI_LXRT_INDX, SIZARG, _RSTFLAGS, &amp;arg);
00217 }
00218 
00219 <span class="preprocessor">#ifdef __cplusplus</span>
00220 <span class="preprocessor"></span>}
00221 <span class="preprocessor">#endif </span><span class="comment">/* __cplusplus */</span>
00222 
00223 <span class="preprocessor">#endif </span><span class="comment">/* __KERNEL__ */</span>
00224 
00225 <span class="preprocessor">#endif </span><span class="comment">/* !_RTAI_USI_H */</span>
</pre></div><hr size="1"><address style="align: right;"><small>Generated on Tue Jan 18 22:53:52 2005 for RTAI API by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border="0"></a> 1.3.9.1 </small></address>
</body>
</html>
