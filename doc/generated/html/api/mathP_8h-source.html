<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>RTAI API: base/math/mathP.h Source File</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.3.9.1 -->
<div class="qindex">  <form class="search" action="search.php" method="get">
<a class="qindex" href="main.html">Main&nbsp;Page</a> | <a class="qindex" href="modules.html">Modules</a> | <a class="qindex" href="files.html">File&nbsp;List</a> | <a class="qindex" href="globals.html">Globals</a> | <a class="qindex" href="pages.html">Related&nbsp;Pages</a>  | <span class="search"><u>S</u>earch&nbsp;for&nbsp;<input class="search" type="text" name="query" value="" size="20" accesskey="s"/></span></form></div>
<div class="nav">
<a class="el" href="dir_000000.html">base</a>&nbsp;/&nbsp;<a class="el" href="dir_000034.html">math</a></div>
<h1>mathP.h</h1><div class="fragment"><pre class="fragment">00001 <span class="comment">/*</span>
00002 <span class="comment"> * ====================================================</span>
00003 <span class="comment"> * Copyright (C) 1993 by Sun Microsystems, Inc. All rights reserved.</span>
00004 <span class="comment"> *</span>
00005 <span class="comment"> * Developed at SunPro, a Sun Microsystems, Inc. business.</span>
00006 <span class="comment"> * Permission to use, copy, modify, and distribute this</span>
00007 <span class="comment"> * software is freely granted, provided that this notice </span>
00008 <span class="comment"> * is preserved.</span>
00009 <span class="comment"> * ====================================================</span>
00010 <span class="comment"> */</span>
00011 
00012 <span class="comment">/*</span>
00013 <span class="comment"> * from: @(#)fdlibm.h 5.1 93/09/24</span>
00014 <span class="comment"> * $Id: mathP_8h-source.html,v 1.3 2005/03/18 09:30:00 rpm Exp $</span>
00015 <span class="comment"> */</span>
00016 
00017 <span class="preprocessor">#ifndef _MATH_PRIVATE_H_</span>
00018 <span class="preprocessor"></span><span class="preprocessor">#define _MATH_PRIVATE_H_</span>
00019 <span class="preprocessor"></span>
00020 <span class="preprocessor">#include &lt;endian.h&gt;</span>
00021 <span class="preprocessor">#include &lt;sys/types.h&gt;</span>
00022 
00023 <span class="comment">/* The original fdlibm code used statements like:</span>
00024 <span class="comment">        n0 = ((*(int*)&amp;one)&gt;&gt;29)^1;             * index of high word *</span>
00025 <span class="comment">        ix0 = *(n0+(int*)&amp;x);                   * high word of x *</span>
00026 <span class="comment">        ix1 = *((1-n0)+(int*)&amp;x);               * low word of x *</span>
00027 <span class="comment">   to dig two 32 bit words out of the 64 bit IEEE floating point</span>
00028 <span class="comment">   value.  That is non-ANSI, and, moreover, the gcc instruction</span>
00029 <span class="comment">   scheduler gets it wrong.  We instead use the following macros.</span>
00030 <span class="comment">   Unlike the original code, we determine the endianness at compile</span>
00031 <span class="comment">   time, not at run time; I don't see much benefit to selecting</span>
00032 <span class="comment">   endianness at run time.  */</span>
00033 
00034 <span class="comment">/* A union which permits us to convert between a double and two 32 bit</span>
00035 <span class="comment">   ints.  */</span>
00036 
00037 <span class="comment">/*</span>
00038 <span class="comment"> * Math on arm is little endian except for the FP word order which is</span>
00039 <span class="comment"> * big endian.</span>
00040 <span class="comment"> */</span>
00041 
00042 <span class="preprocessor">#if (__BYTE_ORDER == __BIG_ENDIAN) || defined(__arm__)</span>
00043 <span class="preprocessor"></span>
00044 <span class="keyword">typedef</span> <span class="keyword">union </span>
00045 <span class="keyword"></span>{
00046   <span class="keywordtype">double</span> value;
00047   <span class="keyword">struct </span>
00048 <span class="keyword">  </span>{
00049     u_int32_t msw;
00050     u_int32_t lsw;
00051   } parts;
00052 } ieee_double_shape_type;
00053 
00054 <span class="preprocessor">#endif</span>
00055 <span class="preprocessor"></span>
00056 <span class="preprocessor">#if (__BYTE_ORDER == __LITTLE_ENDIAN) &amp;&amp; !defined(__arm__)</span>
00057 <span class="preprocessor"></span>
00058 <span class="keyword">typedef</span> <span class="keyword">union </span>
00059 <span class="keyword"></span>{
00060   <span class="keywordtype">double</span> value;
00061   <span class="keyword">struct </span>
00062 <span class="keyword">  </span>{
00063     u_int32_t lsw;
00064     u_int32_t msw;
00065   } parts;
00066 } ieee_double_shape_type;
00067 
00068 <span class="preprocessor">#endif</span>
00069 <span class="preprocessor"></span>
00070 <span class="comment">/* Get two 32 bit ints from a double.  */</span>
00071 
00072 <span class="preprocessor">#define EXTRACT_WORDS(ix0,ix1,d)                                \</span>
00073 <span class="preprocessor">do {                                                            \</span>
00074 <span class="preprocessor">  ieee_double_shape_type ew_u;                                  \</span>
00075 <span class="preprocessor">  ew_u.value = (d);                                             \</span>
00076 <span class="preprocessor">  (ix0) = ew_u.parts.msw;                                       \</span>
00077 <span class="preprocessor">  (ix1) = ew_u.parts.lsw;                                       \</span>
00078 <span class="preprocessor">} while (0)</span>
00079 <span class="preprocessor"></span>
00080 <span class="comment">/* Get the more significant 32 bit int from a double.  */</span>
00081 
00082 <span class="preprocessor">#define GET_HIGH_WORD(i,d)                                      \</span>
00083 <span class="preprocessor">do {                                                            \</span>
00084 <span class="preprocessor">  ieee_double_shape_type gh_u;                                  \</span>
00085 <span class="preprocessor">  gh_u.value = (d);                                             \</span>
00086 <span class="preprocessor">  (i) = gh_u.parts.msw;                                         \</span>
00087 <span class="preprocessor">} while (0)</span>
00088 <span class="preprocessor"></span>
00089 <span class="comment">/* Get the less significant 32 bit int from a double.  */</span>
00090 
00091 <span class="preprocessor">#define GET_LOW_WORD(i,d)                                       \</span>
00092 <span class="preprocessor">do {                                                            \</span>
00093 <span class="preprocessor">  ieee_double_shape_type gl_u;                                  \</span>
00094 <span class="preprocessor">  gl_u.value = (d);                                             \</span>
00095 <span class="preprocessor">  (i) = gl_u.parts.lsw;                                         \</span>
00096 <span class="preprocessor">} while (0)</span>
00097 <span class="preprocessor"></span>
00098 <span class="comment">/* Set a double from two 32 bit ints.  */</span>
00099 
00100 <span class="preprocessor">#define INSERT_WORDS(d,ix0,ix1)                                 \</span>
00101 <span class="preprocessor">do {                                                            \</span>
00102 <span class="preprocessor">  ieee_double_shape_type iw_u;                                  \</span>
00103 <span class="preprocessor">  iw_u.parts.msw = (ix0);                                       \</span>
00104 <span class="preprocessor">  iw_u.parts.lsw = (ix1);                                       \</span>
00105 <span class="preprocessor">  (d) = iw_u.value;                                             \</span>
00106 <span class="preprocessor">} while (0)</span>
00107 <span class="preprocessor"></span>
00108 <span class="comment">/* Set the more significant 32 bits of a double from an int.  */</span>
00109 
00110 <span class="preprocessor">#define SET_HIGH_WORD(d,v)                                      \</span>
00111 <span class="preprocessor">do {                                                            \</span>
00112 <span class="preprocessor">  ieee_double_shape_type sh_u;                                  \</span>
00113 <span class="preprocessor">  sh_u.value = (d);                                             \</span>
00114 <span class="preprocessor">  sh_u.parts.msw = (v);                                         \</span>
00115 <span class="preprocessor">  (d) = sh_u.value;                                             \</span>
00116 <span class="preprocessor">} while (0)</span>
00117 <span class="preprocessor"></span>
00118 <span class="comment">/* Set the less significant 32 bits of a double from an int.  */</span>
00119 
00120 <span class="preprocessor">#define SET_LOW_WORD(d,v)                                       \</span>
00121 <span class="preprocessor">do {                                                            \</span>
00122 <span class="preprocessor">  ieee_double_shape_type sl_u;                                  \</span>
00123 <span class="preprocessor">  sl_u.value = (d);                                             \</span>
00124 <span class="preprocessor">  sl_u.parts.lsw = (v);                                         \</span>
00125 <span class="preprocessor">  (d) = sl_u.value;                                             \</span>
00126 <span class="preprocessor">} while (0)</span>
00127 <span class="preprocessor"></span>
00128 <span class="comment">/* A union which permits us to convert between a float and a 32 bit</span>
00129 <span class="comment">   int.  */</span>
00130 
00131 <span class="keyword">typedef</span> <span class="keyword">union</span>
00132 <span class="keyword"></span>{
00133   <span class="keywordtype">float</span> value;
00134   u_int32_t word;
00135 } ieee_float_shape_type;
00136 
00137 <span class="comment">/* Get a 32 bit int from a float.  */</span>
00138 
00139 <span class="preprocessor">#define GET_FLOAT_WORD(i,d)                                     \</span>
00140 <span class="preprocessor">do {                                                            \</span>
00141 <span class="preprocessor">  ieee_float_shape_type gf_u;                                   \</span>
00142 <span class="preprocessor">  gf_u.value = (d);                                             \</span>
00143 <span class="preprocessor">  (i) = gf_u.word;                                              \</span>
00144 <span class="preprocessor">} while (0)</span>
00145 <span class="preprocessor"></span>
00146 <span class="comment">/* Set a float from a 32 bit int.  */</span>
00147 
00148 <span class="preprocessor">#define SET_FLOAT_WORD(d,i)                                     \</span>
00149 <span class="preprocessor">do {                                                            \</span>
00150 <span class="preprocessor">  ieee_float_shape_type sf_u;                                   \</span>
00151 <span class="preprocessor">  sf_u.word = (i);                                              \</span>
00152 <span class="preprocessor">  (d) = sf_u.value;                                             \</span>
00153 <span class="preprocessor">} while (0)</span>
00154 <span class="preprocessor"></span>
00155 <span class="comment">/* ieee style elementary functions */</span>
00156 <span class="keyword">extern</span> <span class="keywordtype">double</span> __ieee754_sqrt __P((<span class="keywordtype">double</span>));                     
00157 <span class="keyword">extern</span> <span class="keywordtype">double</span> __ieee754_acos __P((<span class="keywordtype">double</span>));                     
00158 <span class="keyword">extern</span> <span class="keywordtype">double</span> __ieee754_acosh __P((<span class="keywordtype">double</span>));                    
00159 <span class="keyword">extern</span> <span class="keywordtype">double</span> __ieee754_log __P((<span class="keywordtype">double</span>));                      
00160 <span class="keyword">extern</span> <span class="keywordtype">double</span> __ieee754_atanh __P((<span class="keywordtype">double</span>));                    
00161 <span class="keyword">extern</span> <span class="keywordtype">double</span> __ieee754_asin __P((<span class="keywordtype">double</span>));                     
00162 <span class="keyword">extern</span> <span class="keywordtype">double</span> __ieee754_atan2 __P((<span class="keywordtype">double</span>,<span class="keywordtype">double</span>));                     
00163 <span class="keyword">extern</span> <span class="keywordtype">double</span> __ieee754_exp __P((<span class="keywordtype">double</span>));
00164 <span class="keyword">extern</span> <span class="keywordtype">double</span> __ieee754_cosh __P((<span class="keywordtype">double</span>));
00165 <span class="keyword">extern</span> <span class="keywordtype">double</span> __ieee754_fmod __P((<span class="keywordtype">double</span>,<span class="keywordtype">double</span>));
00166 <span class="keyword">extern</span> <span class="keywordtype">double</span> __ieee754_pow __P((<span class="keywordtype">double</span>,<span class="keywordtype">double</span>));
00167 <span class="keyword">extern</span> <span class="keywordtype">double</span> __ieee754_lgamma_r __P((<span class="keywordtype">double</span>,<span class="keywordtype">int</span> *));
00168 <span class="keyword">extern</span> <span class="keywordtype">double</span> __ieee754_gamma_r __P((<span class="keywordtype">double</span>,<span class="keywordtype">int</span> *));
00169 <span class="keyword">extern</span> <span class="keywordtype">double</span> __ieee754_lgamma __P((<span class="keywordtype">double</span>));
00170 <span class="keyword">extern</span> <span class="keywordtype">double</span> __ieee754_gamma __P((<span class="keywordtype">double</span>));
00171 <span class="keyword">extern</span> <span class="keywordtype">double</span> __ieee754_log10 __P((<span class="keywordtype">double</span>));
00172 <span class="keyword">extern</span> <span class="keywordtype">double</span> __ieee754_sinh __P((<span class="keywordtype">double</span>));
00173 <span class="keyword">extern</span> <span class="keywordtype">double</span> __ieee754_hypot __P((<span class="keywordtype">double</span>,<span class="keywordtype">double</span>));
00174 <span class="keyword">extern</span> <span class="keywordtype">double</span> __ieee754_j0 __P((<span class="keywordtype">double</span>));
00175 <span class="keyword">extern</span> <span class="keywordtype">double</span> __ieee754_j1 __P((<span class="keywordtype">double</span>));
00176 <span class="keyword">extern</span> <span class="keywordtype">double</span> __ieee754_y0 __P((<span class="keywordtype">double</span>));
00177 <span class="keyword">extern</span> <span class="keywordtype">double</span> __ieee754_y1 __P((<span class="keywordtype">double</span>));
00178 <span class="keyword">extern</span> <span class="keywordtype">double</span> __ieee754_jn __P((<span class="keywordtype">int</span>,<span class="keywordtype">double</span>));
00179 <span class="keyword">extern</span> <span class="keywordtype">double</span> __ieee754_yn __P((<span class="keywordtype">int</span>,<span class="keywordtype">double</span>));
00180 <span class="keyword">extern</span> <span class="keywordtype">double</span> __ieee754_remainder __P((<span class="keywordtype">double</span>,<span class="keywordtype">double</span>));
00181 <span class="keyword">extern</span> <span class="keywordtype">int</span>    __ieee754_rem_pio2 __P((<span class="keywordtype">double</span>,<span class="keywordtype">double</span>*));
00182 <span class="preprocessor">#if defined(_SCALB_INT)</span>
00183 <span class="preprocessor"></span><span class="keyword">extern</span> <span class="keywordtype">double</span> __ieee754_scalb __P((<span class="keywordtype">double</span>,<span class="keywordtype">int</span>));
00184 <span class="preprocessor">#else</span>
00185 <span class="preprocessor"></span><span class="keyword">extern</span> <span class="keywordtype">double</span> __ieee754_scalb __P((<span class="keywordtype">double</span>,<span class="keywordtype">double</span>));
00186 <span class="preprocessor">#endif</span>
00187 <span class="preprocessor"></span>
00188 <span class="comment">/* fdlibm kernel function */</span>
00189 <span class="keyword">extern</span> <span class="keywordtype">double</span> __kernel_standard __P((<span class="keywordtype">double</span>,<span class="keywordtype">double</span>,<span class="keywordtype">int</span>));       
00190 <span class="keyword">extern</span> <span class="keywordtype">double</span> __kernel_sin __P((<span class="keywordtype">double</span>,<span class="keywordtype">double</span>,<span class="keywordtype">int</span>));
00191 <span class="keyword">extern</span> <span class="keywordtype">double</span> __kernel_cos __P((<span class="keywordtype">double</span>,<span class="keywordtype">double</span>));
00192 <span class="keyword">extern</span> <span class="keywordtype">double</span> __kernel_tan __P((<span class="keywordtype">double</span>,<span class="keywordtype">double</span>,<span class="keywordtype">int</span>));
00193 <span class="keyword">extern</span> <span class="keywordtype">int</span>    __kernel_rem_pio2 __P((<span class="keywordtype">double</span>*,<span class="keywordtype">double</span>*,<span class="keywordtype">int</span>,<span class="keywordtype">int</span>,<span class="keywordtype">int</span>,<span class="keyword">const</span> <span class="keywordtype">int</span>*));
00194 
00195 
00196 <span class="comment">/* ieee style elementary float functions */</span>
00197 <span class="keyword">extern</span> <span class="keywordtype">float</span> __ieee754_sqrtf __P((<span class="keywordtype">float</span>));                      
00198 <span class="keyword">extern</span> <span class="keywordtype">float</span> __ieee754_acosf __P((<span class="keywordtype">float</span>));                      
00199 <span class="keyword">extern</span> <span class="keywordtype">float</span> __ieee754_acoshf __P((<span class="keywordtype">float</span>));                     
00200 <span class="keyword">extern</span> <span class="keywordtype">float</span> __ieee754_logf __P((<span class="keywordtype">float</span>));                       
00201 <span class="keyword">extern</span> <span class="keywordtype">float</span> __ieee754_atanhf __P((<span class="keywordtype">float</span>));                     
00202 <span class="keyword">extern</span> <span class="keywordtype">float</span> __ieee754_asinf __P((<span class="keywordtype">float</span>));                      
00203 <span class="keyword">extern</span> <span class="keywordtype">float</span> __ieee754_atan2f __P((<span class="keywordtype">float</span>,<span class="keywordtype">float</span>));                       
00204 <span class="keyword">extern</span> <span class="keywordtype">float</span> __ieee754_expf __P((<span class="keywordtype">float</span>));
00205 <span class="keyword">extern</span> <span class="keywordtype">float</span> __ieee754_coshf __P((<span class="keywordtype">float</span>));
00206 <span class="keyword">extern</span> <span class="keywordtype">float</span> __ieee754_fmodf __P((<span class="keywordtype">float</span>,<span class="keywordtype">float</span>));
00207 <span class="keyword">extern</span> <span class="keywordtype">float</span> __ieee754_powf __P((<span class="keywordtype">float</span>,<span class="keywordtype">float</span>));
00208 <span class="keyword">extern</span> <span class="keywordtype">float</span> __ieee754_lgammaf_r __P((<span class="keywordtype">float</span>,<span class="keywordtype">int</span> *));
00209 <span class="keyword">extern</span> <span class="keywordtype">float</span> __ieee754_gammaf_r __P((<span class="keywordtype">float</span>,<span class="keywordtype">int</span> *));
00210 <span class="keyword">extern</span> <span class="keywordtype">float</span> __ieee754_lgammaf __P((<span class="keywordtype">float</span>));
00211 <span class="keyword">extern</span> <span class="keywordtype">float</span> __ieee754_gammaf __P((<span class="keywordtype">float</span>));
00212 <span class="keyword">extern</span> <span class="keywordtype">float</span> __ieee754_log10f __P((<span class="keywordtype">float</span>));
00213 <span class="keyword">extern</span> <span class="keywordtype">float</span> __ieee754_sinhf __P((<span class="keywordtype">float</span>));
00214 <span class="keyword">extern</span> <span class="keywordtype">float</span> __ieee754_hypotf __P((<span class="keywordtype">float</span>,<span class="keywordtype">float</span>));
00215 <span class="keyword">extern</span> <span class="keywordtype">float</span> __ieee754_j0f __P((<span class="keywordtype">float</span>));
00216 <span class="keyword">extern</span> <span class="keywordtype">float</span> __ieee754_j1f __P((<span class="keywordtype">float</span>));
00217 <span class="keyword">extern</span> <span class="keywordtype">float</span> __ieee754_y0f __P((<span class="keywordtype">float</span>));
00218 <span class="keyword">extern</span> <span class="keywordtype">float</span> __ieee754_y1f __P((<span class="keywordtype">float</span>));
00219 <span class="keyword">extern</span> <span class="keywordtype">float</span> __ieee754_jnf __P((<span class="keywordtype">int</span>,<span class="keywordtype">float</span>));
00220 <span class="keyword">extern</span> <span class="keywordtype">float</span> __ieee754_ynf __P((<span class="keywordtype">int</span>,<span class="keywordtype">float</span>));
00221 <span class="keyword">extern</span> <span class="keywordtype">float</span> __ieee754_remainderf __P((<span class="keywordtype">float</span>,<span class="keywordtype">float</span>));
00222 <span class="keyword">extern</span> <span class="keywordtype">int</span>   __ieee754_rem_pio2f __P((<span class="keywordtype">float</span>,<span class="keywordtype">float</span>*));
00223 <span class="keyword">extern</span> <span class="keywordtype">float</span> __ieee754_scalbf __P((<span class="keywordtype">float</span>,<span class="keywordtype">float</span>));
00224 
00225 <span class="comment">/* float versions of fdlibm kernel functions */</span>
00226 <span class="keyword">extern</span> <span class="keywordtype">float</span> __kernel_sinf __P((<span class="keywordtype">float</span>,<span class="keywordtype">float</span>,<span class="keywordtype">int</span>));
00227 <span class="keyword">extern</span> <span class="keywordtype">float</span> __kernel_cosf __P((<span class="keywordtype">float</span>,<span class="keywordtype">float</span>));
00228 <span class="keyword">extern</span> <span class="keywordtype">float</span> __kernel_tanf __P((<span class="keywordtype">float</span>,<span class="keywordtype">float</span>,<span class="keywordtype">int</span>));
00229 <span class="keyword">extern</span> <span class="keywordtype">int</span>   __kernel_rem_pio2f __P((<span class="keywordtype">float</span>*,<span class="keywordtype">float</span>*,<span class="keywordtype">int</span>,<span class="keywordtype">int</span>,<span class="keywordtype">int</span>,<span class="keyword">const</span> <span class="keywordtype">int</span>*));
00230 
00231 <span class="preprocessor">#endif </span><span class="comment">/* _MATH_PRIVATE_H_ */</span>
</pre></div><hr size="1"><address style="align: right;"><small>Generated on Tue Jan 18 22:53:52 2005 for RTAI API by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border="0"></a> 1.3.9.1 </small></address>
</body>
</html>
