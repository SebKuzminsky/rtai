<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>RTAI API: base/include/rtai_trace.h Source File</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.3.9.1 -->
<div class="qindex">  <form class="search" action="search.php" method="get">
<a class="qindex" href="main.html">Main&nbsp;Page</a> | <a class="qindex" href="modules.html">Modules</a> | <a class="qindex" href="files.html">File&nbsp;List</a> | <a class="qindex" href="globals.html">Globals</a> | <a class="qindex" href="pages.html">Related&nbsp;Pages</a>  | <span class="search"><u>S</u>earch&nbsp;for&nbsp;<input class="search" type="text" name="query" value="" size="20" accesskey="s"/></span></form></div>
<div class="nav">
<a class="el" href="dir_000000.html">base</a>&nbsp;/&nbsp;<a class="el" href="dir_000015.html">include</a></div>
<h1>rtai_trace.h</h1><div class="fragment"><pre class="fragment">00001 <span class="comment">/*</span>
00002 <span class="comment"> * This file contains the necessary definitions for the RTAI tracer.</span>
00003 <span class="comment"> *</span>
00004 <span class="comment"> * Copyright (C) 2000, Karim Yaghmour &lt;karym@opersys.com&gt;</span>
00005 <span class="comment"> *</span>
00006 <span class="comment"> * This program is free software; you can redistribute it and/or</span>
00007 <span class="comment"> * modify it under the terms of the GNU General Public License as</span>
00008 <span class="comment"> * published by the Free Software Foundation; either version 2 of the</span>
00009 <span class="comment"> * License, or (at your option) any later version.</span>
00010 <span class="comment"> *</span>
00011 <span class="comment"> * This program is distributed in the hope that it will be useful,</span>
00012 <span class="comment"> * but WITHOUT ANY WARRANTY; without even the implied warranty of</span>
00013 <span class="comment"> * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the</span>
00014 <span class="comment"> * GNU General Public License for more details.</span>
00015 <span class="comment"> *</span>
00016 <span class="comment"> * You should have received a copy of the GNU General Public License</span>
00017 <span class="comment"> * along with this program; if not, write to the Free Software</span>
00018 <span class="comment"> * Foundation, Inc., 59 Temple Place - Suite 330, Boston, MA 02111-1307, USA.</span>
00019 <span class="comment"> */</span>
00020 
00021 <span class="preprocessor">#ifndef _RTAI_TRACE_H</span>
00022 <span class="preprocessor"></span><span class="preprocessor">#define _RTAI_TRACE_H</span>
00023 <span class="preprocessor"></span>
00024 <span class="preprocessor">#include &lt;rtai_types.h&gt;</span>
00025 
00026 <span class="preprocessor">#if defined(CONFIG_RTAI_TRACE) &amp;&amp; defined(__KERNEL__)</span>
00027 <span class="preprocessor"></span>
00028 <span class="preprocessor">#include &lt;linux/trace.h&gt;</span>
00029 
00030 <span class="comment">/* Is RTAI tracing enabled */</span>
00031 
00032 <span class="comment">/* The functions to the tracer management code */</span>
00033 <span class="keywordtype">int</span> rt_register_tracer
00034        (tracer_call   <span class="comment">/* The tracer function */</span>);
00035 <span class="keywordtype">int</span> rt_unregister_tracer
00036        (tracer_call   <span class="comment">/* The tracer function */</span>);
00037 <span class="keywordtype">int</span> rt_trace_event
00038        (uint8_t       <span class="comment">/* Event ID (as defined in this header file) */</span>,
00039         <span class="keywordtype">void</span>*         <span class="comment">/* Structure describing the event */</span>);
00040 
00041 <span class="comment">/* Generic macros */</span>
00042 <span class="preprocessor">#define RT_TRACE_EVENT(ID, DATA) rt_trace_event(ID, DATA)</span>
00043 <span class="preprocessor"></span>
00044 <span class="preprocessor">#define TRACE_RTAI_START TRACE_EV_MAX</span>
00045 <span class="preprocessor"></span>
00046 <span class="comment">/* Traced events */</span>
00047 <span class="preprocessor">#define TRACE_RTAI_EV_MOUNT              TRACE_RTAI_START +  1   </span><span class="comment">/* The RTAI subsystem was mounted */</span>
00048 <span class="preprocessor">#define TRACE_RTAI_EV_UMOUNT             TRACE_RTAI_START +  2   </span><span class="comment">/* The RTAI subsystem was unmounted */</span>
00049 <span class="preprocessor">#define TRACE_RTAI_EV_GLOBAL_IRQ_ENTRY   TRACE_RTAI_START +  3   </span><span class="comment">/* Entry in a global IRQ */</span>
00050 <span class="preprocessor">#define TRACE_RTAI_EV_GLOBAL_IRQ_EXIT    TRACE_RTAI_START +  4   </span><span class="comment">/* Exit from a global IRQ */</span>
00051 <span class="preprocessor">#define TRACE_RTAI_EV_OWN_IRQ_ENTRY      TRACE_RTAI_START +  5   </span><span class="comment">/* Entry in a CPU own IRQ */</span>
00052 <span class="preprocessor">#define TRACE_RTAI_EV_OWN_IRQ_EXIT       TRACE_RTAI_START +  6   </span><span class="comment">/* Exit from a CPU own IRQ */</span>
00053 <span class="preprocessor">#define TRACE_RTAI_EV_TRAP_ENTRY         TRACE_RTAI_START +  7   </span><span class="comment">/* Entry in a trap */</span>
00054 <span class="preprocessor">#define TRACE_RTAI_EV_TRAP_EXIT          TRACE_RTAI_START +  8   </span><span class="comment">/* Exit from a trap */</span>
00055 <span class="preprocessor">#define TRACE_RTAI_EV_SRQ_ENTRY          TRACE_RTAI_START +  9   </span><span class="comment">/* Entry in a SRQ */</span>
00056 <span class="preprocessor">#define TRACE_RTAI_EV_SRQ_EXIT           TRACE_RTAI_START + 10   </span><span class="comment">/* Exit from a SRQ */</span>
00057 <span class="preprocessor">#define TRACE_RTAI_EV_SWITCHTO_LINUX     TRACE_RTAI_START + 11   </span><span class="comment">/* Switch a CPU to Linux */</span>
00058 <span class="preprocessor">#define TRACE_RTAI_EV_SWITCHTO_RT        TRACE_RTAI_START + 12   </span><span class="comment">/* Switch a CPU to real-time */</span>
00059 <span class="preprocessor">#define TRACE_RTAI_EV_SCHED_CHANGE       TRACE_RTAI_START + 13   </span><span class="comment">/* A scheduling change has occured */</span>
00060 <span class="preprocessor">#define TRACE_RTAI_EV_TASK               TRACE_RTAI_START + 14   </span><span class="comment">/* Hit key part of task services */</span>
00061 <span class="preprocessor">#define TRACE_RTAI_EV_TIMER              TRACE_RTAI_START + 15   </span><span class="comment">/* Hit key part of timer services */</span>
00062 <span class="preprocessor">#define TRACE_RTAI_EV_SEM                TRACE_RTAI_START + 16   </span><span class="comment">/* Hit key part of semaphore services */</span>
00063 <span class="preprocessor">#define TRACE_RTAI_EV_MSG                TRACE_RTAI_START + 17   </span><span class="comment">/* Hit key part of message services */</span>
00064 <span class="preprocessor">#define TRACE_RTAI_EV_RPC                TRACE_RTAI_START + 18   </span><span class="comment">/* Hit key part of RPC services */</span>
00065 <span class="preprocessor">#define TRACE_RTAI_EV_MBX                TRACE_RTAI_START + 19   </span><span class="comment">/* Hit key part of mail box services */</span>
00066 <span class="preprocessor">#define TRACE_RTAI_EV_FIFO               TRACE_RTAI_START + 20   </span><span class="comment">/* Hit key part of FIFO services */</span>
00067 <span class="preprocessor">#define TRACE_RTAI_EV_SHM                TRACE_RTAI_START + 21   </span><span class="comment">/* Hit key part of shared memory services */</span>
00068 <span class="preprocessor">#define TRACE_RTAI_EV_POSIX              TRACE_RTAI_START + 22   </span><span class="comment">/* Hit key part of Posix services */</span>
00069 <span class="preprocessor">#define TRACE_RTAI_EV_LXRT               TRACE_RTAI_START + 23   </span><span class="comment">/* Hit key part of LXRT services */</span>
00070 <span class="preprocessor">#define TRACE_RTAI_EV_LXRTI              TRACE_RTAI_START + 24   </span><span class="comment">/* Hit key part of LXRT-Informed services */</span>
00071 
00072 <span class="comment">/* Max number of traced events */</span>
00073 <span class="preprocessor">#define TRACE_RTAI_EV_MAX               TRACE_RTAI_EV_LXRTI</span>
00074 <span class="preprocessor"></span>
00075 <span class="comment">/* Structures and macros for traced events */</span>
00076 <span class="comment">/*  TRACE_RTAI_MOUNT */</span>
00077 <span class="preprocessor">#define TRACE_RTAI_MOUNT()    rt_trace_event(TRACE_RTAI_EV_MOUNT, NULL)</span>
00078 <span class="preprocessor"></span>
00079 <span class="comment">/*  TRACE_RTAI_UMOUNT */</span>
00080 <span class="preprocessor">#define TRACE_RTAI_UMOUNT()   rt_trace_event(TRACE_RTAI_EV_UMOUNT, NULL)</span>
00081 <span class="preprocessor"></span>
00082 <span class="comment">/*  TRACE_RTAI_GLOBAL_IRQ_ENTRY */</span>
00083 <span class="keyword">typedef</span> <span class="keyword">struct </span>_trace_rtai_global_irq_entry
00084 {
00085   uint8_t  irq_id;      <span class="comment">/* IRQ number */</span>
00086   uint8_t  kernel;      <span class="comment">/* Are we executing kernel code */</span>
00087 } LTT_PACKED_STRUCT trace_rtai_global_irq_entry;
00088 <span class="preprocessor">#if CONFIG_X86</span>
00089 <span class="preprocessor"></span><span class="preprocessor">#define TRACE_RTAI_GLOBAL_IRQ_ENTRY(ID, __dummy) \</span>
00090 <span class="preprocessor">           do \</span>
00091 <span class="preprocessor">           {\</span>
00092 <span class="preprocessor">           uint32_t                    eflags, xcs; \</span>
00093 <span class="preprocessor">           trace_rtai_global_irq_entry irq_entry;\</span>
00094 <span class="preprocessor">           irq_entry.irq_id = ID;\</span>
00095 <span class="preprocessor">           __asm__ __volatile__("pushfl; pop %0": "=g" (eflags)); \</span>
00096 <span class="preprocessor">           __asm__ __volatile__("pushl %%cs; pop %0": "=g" (xcs)); \</span>
00097 <span class="preprocessor">           irq_entry.kernel = !((VM_MASK &amp; eflags) || (3 &amp; xcs));\</span>
00098 <span class="preprocessor">           rt_trace_event(TRACE_RTAI_EV_GLOBAL_IRQ_ENTRY, &amp;irq_entry);\</span>
00099 <span class="preprocessor">           } while(0)</span>
00100 <span class="preprocessor"></span><span class="preprocessor">#endif</span>
00101 <span class="preprocessor"></span><span class="preprocessor">#if CONFIG_PPC</span>
00102 <span class="preprocessor"></span><span class="preprocessor">#define TRACE_RTAI_GLOBAL_IRQ_ENTRY(ID, KERNEL) \</span>
00103 <span class="preprocessor">           do \</span>
00104 <span class="preprocessor">           {\</span>
00105 <span class="preprocessor">           trace_rtai_global_irq_entry irq_entry;\</span>
00106 <span class="preprocessor">           irq_entry.irq_id = ID;\</span>
00107 <span class="preprocessor">           irq_entry.kernel = KERNEL;\</span>
00108 <span class="preprocessor">           rt_trace_event(TRACE_RTAI_EV_GLOBAL_IRQ_ENTRY, &amp;irq_entry);\</span>
00109 <span class="preprocessor">           } while(0)</span>
00110 <span class="preprocessor"></span><span class="preprocessor">#endif</span>
00111 <span class="preprocessor"></span>
00112 <span class="comment">/*  TRACE_RTAI_GLOBAL_IRQ_EXIT */</span>
00113 <span class="preprocessor">#define TRACE_RTAI_GLOBAL_IRQ_EXIT() rt_trace_event(TRACE_RTAI_EV_GLOBAL_IRQ_EXIT, NULL)</span>
00114 <span class="preprocessor"></span>
00115 <span class="comment">/*  TRACE_RTAI_OWN_IRQ_ENTRY */</span>
00116 <span class="keyword">typedef</span> <span class="keyword">struct </span>_trace_rtai_own_irq_entry
00117 {
00118   uint8_t  irq_id;      <span class="comment">/* IRQ number */</span>
00119   uint8_t  kernel;      <span class="comment">/* Are we executing kernel code */</span>
00120 } LTT_PACKED_STRUCT trace_rtai_own_irq_entry;
00121 <span class="preprocessor">#if CONFIG_X86</span>
00122 <span class="preprocessor"></span><span class="preprocessor">#define TRACE_RTAI_OWN_IRQ_ENTRY(ID) \</span>
00123 <span class="preprocessor">           do \</span>
00124 <span class="preprocessor">           {\</span>
00125 <span class="preprocessor">           uint32_t                 eflags, xcs; \</span>
00126 <span class="preprocessor">           trace_rtai_own_irq_entry irq_entry;\</span>
00127 <span class="preprocessor">           irq_entry.irq_id = ID;\</span>
00128 <span class="preprocessor">           __asm__ __volatile__("pushfl; pop %0": "=g" (eflags)); \</span>
00129 <span class="preprocessor">           __asm__ __volatile__("pushl %%cs; pop %0": "=g" (xcs)); \</span>
00130 <span class="preprocessor">           irq_entry.kernel = !((VM_MASK &amp; eflags) || (3 &amp; xcs));\</span>
00131 <span class="preprocessor">           rt_trace_event(TRACE_RTAI_EV_OWN_IRQ_ENTRY, &amp;irq_entry);\</span>
00132 <span class="preprocessor">           } while(0)</span>
00133 <span class="preprocessor"></span><span class="preprocessor">#endif</span>
00134 <span class="preprocessor"></span><span class="preprocessor">#if CONFIG_PPC</span>
00135 <span class="preprocessor"></span><span class="preprocessor">#define TRACE_RTAI_OWN_IRQ_ENTRY(ID, KERNEL) \</span>
00136 <span class="preprocessor">           do \</span>
00137 <span class="preprocessor">           {\</span>
00138 <span class="preprocessor">           trace_rtai_own_irq_entry irq_entry;\</span>
00139 <span class="preprocessor">           irq_entry.irq_id = ID;\</span>
00140 <span class="preprocessor">           irq_entry.kernel = KERNEL;\</span>
00141 <span class="preprocessor">           rt_trace_event(TRACE_RTAI_EV_OWN_IRQ_ENTRY, &amp;irq_entry);\</span>
00142 <span class="preprocessor">           } while(0)</span>
00143 <span class="preprocessor"></span><span class="preprocessor">#endif</span>
00144 <span class="preprocessor"></span>
00145 <span class="comment">/*  TRACE_RTAI_OWN_IRQ_EXIT */</span>
00146 <span class="preprocessor">#define TRACE_RTAI_OWN_IRQ_EXIT() rt_trace_event(TRACE_RTAI_EV_OWN_IRQ_EXIT, NULL)</span>
00147 <span class="preprocessor"></span>
00148 <span class="comment">/*  TRACE_RTAI_TRAP_ENTRY */</span>
00149 <span class="keyword">typedef</span> <span class="keyword">struct </span>_trace_rtai_trap_entry
00150 {
00151   uint8_t   trap_id;        <span class="comment">/* Trap number */</span>
00152   uint32_t  address;        <span class="comment">/* Address where trap occured */</span>
00153 } LTT_PACKED_STRUCT trace_rtai_trap_entry;
00154 <span class="preprocessor">#define TRACE_RTAI_TRAP_ENTRY(ID,ADDR) \</span>
00155 <span class="preprocessor">           do \</span>
00156 <span class="preprocessor">           {\</span>
00157 <span class="preprocessor">           trace_rtai_trap_entry trap_event;\</span>
00158 <span class="preprocessor">           trap_event.trap_id = ID;\</span>
00159 <span class="preprocessor">           trap_event.address = ADDR; \</span>
00160 <span class="preprocessor">           rt_trace_event(TRACE_RTAI_EV_TRAP_ENTRY, &amp;trap_event);\</span>
00161 <span class="preprocessor">           } while(0)</span>
00162 <span class="preprocessor"></span><span class="comment">/*</span>
00163 <span class="comment">           uint32_t              eip; \</span>
00164 <span class="comment">           __asm__ __volatile__("pushl %%ip; pop %0": "=g" (eip)); \</span>
00165 <span class="comment">           trap_event.address = eip;\</span>
00166 <span class="comment">*/</span>
00167 
00168 <span class="comment">/*  TRACE_RTAI_TRAP_EXIT */</span>
00169 <span class="preprocessor">#define TRACE_RTAI_TRAP_EXIT() rt_trace_event(TRACE_RTAI_EV_TRAP_EXIT, NULL)</span>
00170 <span class="preprocessor"></span>
00171 <span class="comment">/*  TRACE_RTAI_SRQ_ENTRY */</span>
00172 <span class="keyword">typedef</span> <span class="keyword">struct </span>_trace_rtai_srq_entry
00173 {
00174   uint8_t  srq_id;      <span class="comment">/* SRQ number */</span>
00175   uint8_t  kernel;      <span class="comment">/* Are we executing kernel code */</span>
00176 } LTT_PACKED_STRUCT trace_rtai_srq_entry;
00177 <span class="preprocessor">#if CONFIG_X86</span>
00178 <span class="preprocessor"></span><span class="preprocessor">#define TRACE_RTAI_SRQ_ENTRY(ID) \</span>
00179 <span class="preprocessor">           do \</span>
00180 <span class="preprocessor">           {\</span>
00181 <span class="preprocessor">           uint32_t             eflags, xcs; \</span>
00182 <span class="preprocessor">           trace_rtai_srq_entry srq_entry;\</span>
00183 <span class="preprocessor">           srq_entry.srq_id = ID;\</span>
00184 <span class="preprocessor">           __asm__ __volatile__("pushfl; pop %0": "=g" (eflags)); \</span>
00185 <span class="preprocessor">           __asm__ __volatile__("pushl %%cs; pop %0": "=g" (xcs)); \</span>
00186 <span class="preprocessor">           srq_entry.kernel = !((VM_MASK &amp; eflags) || (3 &amp; xcs));\</span>
00187 <span class="preprocessor">           rt_trace_event(TRACE_RTAI_EV_SRQ_ENTRY, &amp;srq_entry);\</span>
00188 <span class="preprocessor">           } while(0)</span>
00189 <span class="preprocessor"></span><span class="preprocessor">#endif</span>
00190 <span class="preprocessor"></span><span class="preprocessor">#if CONFIG_PPC || CONFIG_ARM</span>
00191 <span class="preprocessor"></span><span class="preprocessor">#define TRACE_RTAI_SRQ_ENTRY(ID,KERNEL) \</span>
00192 <span class="preprocessor">           do \</span>
00193 <span class="preprocessor">           {\</span>
00194 <span class="preprocessor">           trace_rtai_srq_entry srq_entry;\</span>
00195 <span class="preprocessor">           srq_entry.srq_id = ID;\</span>
00196 <span class="preprocessor">           srq_entry.kernel = KERNEL;\</span>
00197 <span class="preprocessor">           rt_trace_event(TRACE_RTAI_EV_SRQ_ENTRY, &amp;srq_entry);\</span>
00198 <span class="preprocessor">           } while(0)</span>
00199 <span class="preprocessor"></span><span class="preprocessor">#endif</span>
00200 <span class="preprocessor"></span>
00201 <span class="comment">/*  TRACE_RTAI_SRQ_EXIT */</span>
00202 <span class="preprocessor">#define TRACE_RTAI_SRQ_EXIT() rt_trace_event(TRACE_RTAI_EV_SRQ_EXIT, NULL)</span>
00203 <span class="preprocessor"></span>
00204 <span class="comment">/*  TRACE_RTAI_SWITCHTO_LINUX */</span>
00205 <span class="keyword">typedef</span> <span class="keyword">struct </span>_trace_rtai_switchto_linux
00206 {
00207   uint8_t   cpu_id;         <span class="comment">/* The CPUID being switched to Linux */</span>
00208 } LTT_PACKED_STRUCT trace_rtai_switchto_linux;
00209 <span class="preprocessor">#define TRACE_RTAI_SWITCHTO_LINUX(ID) \</span>
00210 <span class="preprocessor">           do \</span>
00211 <span class="preprocessor">           {\</span>
00212 <span class="preprocessor">           trace_rtai_switchto_linux switch_event; \</span>
00213 <span class="preprocessor">           switch_event.cpu_id = (uint8_t) ID; \</span>
00214 <span class="preprocessor">           rt_trace_event(TRACE_RTAI_EV_SWITCHTO_LINUX, &amp;switch_event); \</span>
00215 <span class="preprocessor">           } while(0)</span>
00216 <span class="preprocessor"></span>
00217 <span class="comment">/*  TRACE_RTAI_SWITCHTO_RT */</span>
00218 <span class="keyword">typedef</span> <span class="keyword">struct </span>_trace_rtai_switchto_rt
00219 {
00220   uint8_t   cpu_id;         <span class="comment">/* The CPUID being switched to RT */</span>
00221 } LTT_PACKED_STRUCT trace_rtai_switchto_rt;
00222 <span class="preprocessor">#define TRACE_RTAI_SWITCHTO_RT(ID) \</span>
00223 <span class="preprocessor">           do \</span>
00224 <span class="preprocessor">           {\</span>
00225 <span class="preprocessor">           trace_rtai_switchto_rt switch_event; \</span>
00226 <span class="preprocessor">           switch_event.cpu_id = (uint8_t) ID; \</span>
00227 <span class="preprocessor">           rt_trace_event(TRACE_RTAI_EV_SWITCHTO_RT, &amp;switch_event); \</span>
00228 <span class="preprocessor">           } while(0)</span>
00229 <span class="preprocessor"></span>
00230 <span class="comment">/*  TRACE_RTAI_SCHED_CHANGE */</span> 
00231 <span class="keyword">typedef</span> <span class="keyword">struct </span>_trace_rtai_sched_change
00232 {
00233   uint32_t  out;         <span class="comment">/* Outgoing process */</span>
00234   uint32_t  in;          <span class="comment">/* Incoming process */</span>
00235   uint32_t  out_state;   <span class="comment">/* Outgoing process' state */</span>
00236 } LTT_PACKED_STRUCT trace_rtai_sched_change;
00237 <span class="preprocessor">#define TRACE_RTAI_SCHED_CHANGE(OUT, IN, OUT_STATE) \</span>
00238 <span class="preprocessor">           do \</span>
00239 <span class="preprocessor">           {\</span>
00240 <span class="preprocessor">           trace_rtai_sched_change sched_event;\</span>
00241 <span class="preprocessor">           sched_event.out       = (uint32_t) OUT;\</span>
00242 <span class="preprocessor">           sched_event.in        = (uint32_t) IN;\</span>
00243 <span class="preprocessor">           sched_event.out_state = (uint32_t) OUT_STATE; \</span>
00244 <span class="preprocessor">           rt_trace_event(TRACE_RTAI_EV_SCHED_CHANGE, &amp;sched_event);\</span>
00245 <span class="preprocessor">           } while(0)</span>
00246 <span class="preprocessor"></span>
00247 <span class="comment">/*  TRACE_RTAI_TASK */</span>
00248 <span class="preprocessor">#define TRACE_RTAI_EV_TASK_INIT                    1     </span><span class="comment">/* Initialize task */</span>
00249 <span class="preprocessor">#define TRACE_RTAI_EV_TASK_DELETE                  2     </span><span class="comment">/* Delete task */</span>
00250 <span class="preprocessor">#define TRACE_RTAI_EV_TASK_SIG_HANDLER             3     </span><span class="comment">/* Set signal handler */</span>
00251 <span class="preprocessor">#define TRACE_RTAI_EV_TASK_YIELD                   4     </span><span class="comment">/* Yield CPU control */</span>
00252 <span class="preprocessor">#define TRACE_RTAI_EV_TASK_SUSPEND                 5     </span><span class="comment">/* Suspend task */</span>
00253 <span class="preprocessor">#define TRACE_RTAI_EV_TASK_RESUME                  6     </span><span class="comment">/* Resume task */</span>
00254 <span class="preprocessor">#define TRACE_RTAI_EV_TASK_MAKE_PERIOD_RELATIVE    7     </span><span class="comment">/* Make task periodic relative in nanoseconds */</span>
00255 <span class="preprocessor">#define TRACE_RTAI_EV_TASK_MAKE_PERIOD             8     </span><span class="comment">/* Make task periodic */</span>
00256 <span class="preprocessor">#define TRACE_RTAI_EV_TASK_WAIT_PERIOD             9     </span><span class="comment">/* Wait until the next period */</span>
00257 <span class="preprocessor">#define TRACE_RTAI_EV_TASK_BUSY_SLEEP             10     </span><span class="comment">/* Busy sleep */</span>
00258 <span class="preprocessor">#define TRACE_RTAI_EV_TASK_SLEEP                  11     </span><span class="comment">/* Sleep */</span>
00259 <span class="preprocessor">#define TRACE_RTAI_EV_TASK_SLEEP_UNTIL            12     </span><span class="comment">/* Sleep until */</span>
00260 <span class="keyword">typedef</span> <span class="keyword">struct </span>_trace_rtai_task
00261 {
00262   uint8_t   event_sub_id;  <span class="comment">/* Task event ID */</span>
00263   uint32_t  event_data1;   <span class="comment">/* Event data */</span>
00264   uint64_t  event_data2;   <span class="comment">/* Event data 2 */</span>
00265   uint64_t  event_data3;   <span class="comment">/* Event data 3 */</span>
00266 } LTT_PACKED_STRUCT trace_rtai_task;
00267 <span class="preprocessor">#define TRACE_RTAI_TASK(ID, DATA1, DATA2, DATA3) \</span>
00268 <span class="preprocessor">           do \</span>
00269 <span class="preprocessor">           {\</span>
00270 <span class="preprocessor">           trace_rtai_task task_event;\</span>
00271 <span class="preprocessor">           task_event.event_sub_id = (uint8_t)  ID;\</span>
00272 <span class="preprocessor">           task_event.event_data1  = (uint32_t) DATA1; \</span>
00273 <span class="preprocessor">           task_event.event_data2  = (uint64_t) DATA2; \</span>
00274 <span class="preprocessor">           task_event.event_data3  = (uint64_t) DATA3; \</span>
00275 <span class="preprocessor">           rt_trace_event(TRACE_RTAI_EV_TASK, &amp;task_event);\</span>
00276 <span class="preprocessor">           } while(0)</span>
00277 <span class="preprocessor"></span>
00278 <span class="comment">/*  TRACE_RTAI_TIMER */</span>
00279 <span class="preprocessor">#define TRACE_RTAI_EV_TIMER_REQUEST                1     </span><span class="comment">/* Request timer */</span>
00280 <span class="preprocessor">#define TRACE_RTAI_EV_TIMER_FREE                   2     </span><span class="comment">/* Free timer */</span>
00281 <span class="preprocessor">#define TRACE_RTAI_EV_TIMER_REQUEST_APIC           3     </span><span class="comment">/* Request APIC timers */</span>
00282 <span class="preprocessor">#define TRACE_RTAI_EV_TIMER_APIC_FREE              4     </span><span class="comment">/* Free APIC timers */</span>
00283 <span class="preprocessor">#define TRACE_RTAI_EV_TIMER_HANDLE_EXPIRY          5     </span><span class="comment">/* Handle timer expiry */</span>
00284 <span class="keyword">typedef</span> <span class="keyword">struct </span>_trace_rtai_timer
00285 {
00286   uint8_t   event_sub_id;  <span class="comment">/* Timer event ID */</span>
00287   uint32_t  event_data1;   <span class="comment">/* Event data 1 */</span>
00288   uint32_t  event_data2;   <span class="comment">/* Event data 2 */</span>
00289 } LTT_PACKED_STRUCT trace_rtai_timer;
00290 <span class="preprocessor">#define TRACE_RTAI_TIMER(ID, DATA1, DATA2) \</span>
00291 <span class="preprocessor">           do \</span>
00292 <span class="preprocessor">           {\</span>
00293 <span class="preprocessor">           trace_rtai_timer timer_event; \</span>
00294 <span class="preprocessor">           timer_event.event_sub_id = (uint8_t)  ID; \</span>
00295 <span class="preprocessor">           timer_event.event_data1  = (uint32_t) DATA1; \</span>
00296 <span class="preprocessor">           timer_event.event_data2  = (uint32_t) DATA2; \</span>
00297 <span class="preprocessor">           rt_trace_event(TRACE_RTAI_EV_TIMER, &amp;timer_event); \</span>
00298 <span class="preprocessor">           } while(0)</span>
00299 <span class="preprocessor"></span>
00300 <span class="comment">/*  TRACE_RTAI_SEM */</span>
00301 <span class="preprocessor">#define TRACE_RTAI_EV_SEM_INIT                     1     </span><span class="comment">/* Initialize semaphore */</span>
00302 <span class="preprocessor">#define TRACE_RTAI_EV_SEM_DELETE                   2     </span><span class="comment">/* Delete semaphore */</span>
00303 <span class="preprocessor">#define TRACE_RTAI_EV_SEM_SIGNAL                   3     </span><span class="comment">/* Signal semaphore */</span>
00304 <span class="preprocessor">#define TRACE_RTAI_EV_SEM_WAIT                     4     </span><span class="comment">/* Wait on semaphore */</span>
00305 <span class="preprocessor">#define TRACE_RTAI_EV_SEM_WAIT_IF                  5     </span><span class="comment">/* Take semaphore if possible */</span>
00306 <span class="preprocessor">#define TRACE_RTAI_EV_SEM_WAIT_UNTIL               6     </span><span class="comment">/* Wait on semaphore until a certain time */</span>
00307 <span class="keyword">typedef</span> <span class="keyword">struct </span>_trace_rtai_sem
00308 {
00309   uint8_t   event_sub_id;  <span class="comment">/* Semaphore event ID */</span>
00310   uint32_t  event_data1;   <span class="comment">/* Event data 1 */</span>
00311   uint64_t  event_data2;   <span class="comment">/* Event data 2 */</span>
00312 } LTT_PACKED_STRUCT trace_rtai_sem;
00313 <span class="preprocessor">#define TRACE_RTAI_SEM(ID, DATA1, DATA2) \</span>
00314 <span class="preprocessor">           do \</span>
00315 <span class="preprocessor">           {\</span>
00316 <span class="preprocessor">           trace_rtai_sem sem_event; \</span>
00317 <span class="preprocessor">           sem_event.event_sub_id = (uint8_t)  ID; \</span>
00318 <span class="preprocessor">           sem_event.event_data1  = (uint32_t) DATA1; \</span>
00319 <span class="preprocessor">           sem_event.event_data2  = (uint64_t) DATA2; \</span>
00320 <span class="preprocessor">           rt_trace_event(TRACE_RTAI_EV_SEM, &amp;sem_event); \</span>
00321 <span class="preprocessor">           } while(0)</span>
00322 <span class="preprocessor"></span>
00323 <span class="comment">/*  TRACE_RTAI_MSG */</span>
00324 <span class="preprocessor">#define TRACE_RTAI_EV_MSG_SEND                      1    </span><span class="comment">/* Send a message */</span>
00325 <span class="preprocessor">#define TRACE_RTAI_EV_MSG_SEND_IF                   2    </span><span class="comment">/* Send if possible */</span>
00326 <span class="preprocessor">#define TRACE_RTAI_EV_MSG_SEND_UNTIL                3    </span><span class="comment">/* Try sending until a certain time */</span>
00327 <span class="preprocessor">#define TRACE_RTAI_EV_MSG_RECV                      4    </span><span class="comment">/* Receive a message */</span>
00328 <span class="preprocessor">#define TRACE_RTAI_EV_MSG_RECV_IF                   5    </span><span class="comment">/* Receive if possible */</span>
00329 <span class="preprocessor">#define TRACE_RTAI_EV_MSG_RECV_UNTIL                6    </span><span class="comment">/* Try receiving until a certain time */</span>
00330 <span class="keyword">typedef</span> <span class="keyword">struct </span>_trace_rtai_msg
00331 {
00332   uint8_t   event_sub_id;  <span class="comment">/* Message event ID */</span>
00333   uint32_t  event_data1;   <span class="comment">/* Event data 1 */</span>
00334   uint32_t  event_data2;   <span class="comment">/* Event data 2 */</span>
00335   uint64_t  event_data3;   <span class="comment">/* Event data 3 */</span>
00336 } LTT_PACKED_STRUCT trace_rtai_msg;
00337 <span class="preprocessor">#define TRACE_RTAI_MSG(ID, DATA1, DATA2, DATA3) \</span>
00338 <span class="preprocessor">           do \</span>
00339 <span class="preprocessor">           {\</span>
00340 <span class="preprocessor">           trace_rtai_msg msg_event; \</span>
00341 <span class="preprocessor">           msg_event.event_sub_id = (uint8_t)  ID; \</span>
00342 <span class="preprocessor">           msg_event.event_data1  = (uint32_t) DATA1; \</span>
00343 <span class="preprocessor">           msg_event.event_data2  = (uint32_t) DATA2; \</span>
00344 <span class="preprocessor">           msg_event.event_data3  = (uint64_t) DATA3; \</span>
00345 <span class="preprocessor">           rt_trace_event(TRACE_RTAI_EV_MSG, &amp;msg_event); \</span>
00346 <span class="preprocessor">           } while(0)</span>
00347 <span class="preprocessor"></span>
00348 <span class="comment">/*  TRACE_RTAI_RPC */</span>
00349 <span class="preprocessor">#define TRACE_RTAI_EV_RPC_MAKE                       1    </span><span class="comment">/* Make a remote procedure call */</span>
00350 <span class="preprocessor">#define TRACE_RTAI_EV_RPC_MAKE_IF                    2    </span><span class="comment">/* Make RPC if receiver is ready */</span>
00351 <span class="preprocessor">#define TRACE_RTAI_EV_RPC_MAKE_UNTIL                 3    </span><span class="comment">/* Try making an RPC until a certain time */</span>
00352 <span class="preprocessor">#define TRACE_RTAI_EV_RPC_RETURN                     4    </span><span class="comment">/* Send result of RPC back to caller */</span>
00353 <span class="keyword">typedef</span> <span class="keyword">struct </span>_trace_rtai_rpc
00354 {
00355   uint8_t   event_sub_id;  <span class="comment">/* RPC event ID */</span>
00356   uint32_t  event_data1;   <span class="comment">/* Event data 1 */</span>
00357   uint32_t  event_data2;   <span class="comment">/* Event data 2 */</span>
00358   uint64_t  event_data3;   <span class="comment">/* Event data 3 */</span>
00359 } LTT_PACKED_STRUCT trace_rtai_rpc;
00360 <span class="preprocessor">#define TRACE_RTAI_RPC(ID, DATA1, DATA2, DATA3) \</span>
00361 <span class="preprocessor">           do \</span>
00362 <span class="preprocessor">           {\</span>
00363 <span class="preprocessor">           trace_rtai_rpc rpc_event; \</span>
00364 <span class="preprocessor">           rpc_event.event_sub_id = (uint8_t)  ID; \</span>
00365 <span class="preprocessor">           rpc_event.event_data1  = (uint32_t) DATA1; \</span>
00366 <span class="preprocessor">           rpc_event.event_data2  = (uint32_t) DATA2; \</span>
00367 <span class="preprocessor">           rpc_event.event_data3  = (uint64_t) DATA3; \</span>
00368 <span class="preprocessor">           rt_trace_event(TRACE_RTAI_EV_RPC, &amp;rpc_event); \</span>
00369 <span class="preprocessor">           } while(0)</span>
00370 <span class="preprocessor"></span>
00371 <span class="comment">/*  TRACE_RTAI_MBX */</span>
00372 <span class="preprocessor">#define TRACE_RTAI_EV_MBX_INIT                       1    </span><span class="comment">/* Initialize Message BoX */</span>
00373 <span class="preprocessor">#define TRACE_RTAI_EV_MBX_DELETE                     2    </span><span class="comment">/* Delete message box */</span>
00374 <span class="preprocessor">#define TRACE_RTAI_EV_MBX_SEND                       3    </span><span class="comment">/* Send a message to a message box */</span>
00375 <span class="preprocessor">#define TRACE_RTAI_EV_MBX_SEND_WP                    4    </span><span class="comment">/* Send as many bytes as possible */</span>
00376 <span class="preprocessor">#define TRACE_RTAI_EV_MBX_SEND_IF                    5    </span><span class="comment">/* Send a message if possible */</span>
00377 <span class="preprocessor">#define TRACE_RTAI_EV_MBX_SEND_UNTIL                 6    </span><span class="comment">/* Try sending until a certain time */</span>
00378 <span class="preprocessor">#define TRACE_RTAI_EV_MBX_RECV                       7    </span><span class="comment">/* Receive a message */</span>
00379 <span class="preprocessor">#define TRACE_RTAI_EV_MBX_RECV_WP                    8    </span><span class="comment">/* Receive as many bytes as possible */</span>
00380 <span class="preprocessor">#define TRACE_RTAI_EV_MBX_RECV_IF                    9    </span><span class="comment">/* Receive a message if available */</span>
00381 <span class="preprocessor">#define TRACE_RTAI_EV_MBX_RECV_UNTIL                10    </span><span class="comment">/* Try receiving until a certain time */</span>
00382 <span class="keyword">typedef</span> <span class="keyword">struct </span>_trace_rtai_mbx
00383 {
00384   uint8_t   event_sub_id;  <span class="comment">/* Message Box event ID */</span>
00385   uint32_t  event_data1;   <span class="comment">/* Event data 1 */</span>
00386   uint32_t  event_data2;   <span class="comment">/* Event data 2 */</span>
00387   uint64_t  event_data3;   <span class="comment">/* Event data 3 */</span>  
00388 } LTT_PACKED_STRUCT trace_rtai_mbx;
00389 <span class="preprocessor">#define TRACE_RTAI_MBX(ID, DATA1, DATA2, DATA3) \</span>
00390 <span class="preprocessor">           do \</span>
00391 <span class="preprocessor">           {\</span>
00392 <span class="preprocessor">           trace_rtai_mbx mbx_event; \</span>
00393 <span class="preprocessor">           mbx_event.event_sub_id = (uint8_t)  ID; \</span>
00394 <span class="preprocessor">           mbx_event.event_data1  = (uint32_t) DATA1; \</span>
00395 <span class="preprocessor">           mbx_event.event_data2  = (uint32_t) DATA2; \</span>
00396 <span class="preprocessor">           mbx_event.event_data3  = (uint64_t) DATA3; \</span>
00397 <span class="preprocessor">           rt_trace_event(TRACE_RTAI_EV_MBX, &amp;mbx_event); \</span>
00398 <span class="preprocessor">           } while(0)</span>
00399 <span class="preprocessor"></span>
00400 <span class="comment">/*  TRACE_RTAI_FIFO */</span>
00401 <span class="preprocessor">#define TRACE_RTAI_EV_FIFO_CREATE                     1   </span><span class="comment">/* Create FIFO */</span>
00402 <span class="preprocessor">#define TRACE_RTAI_EV_FIFO_DESTROY                    2   </span><span class="comment">/* Destroy FIFO */</span>
00403 <span class="preprocessor">#define TRACE_RTAI_EV_FIFO_RESET                      3   </span><span class="comment">/* Reset FIFO */</span>
00404 <span class="preprocessor">#define TRACE_RTAI_EV_FIFO_RESIZE                     4   </span><span class="comment">/* Resize FIFO */</span>
00405 <span class="preprocessor">#define TRACE_RTAI_EV_FIFO_PUT                        5   </span><span class="comment">/* Write data to FIFO */</span>
00406 <span class="preprocessor">#define TRACE_RTAI_EV_FIFO_GET                        6   </span><span class="comment">/* Get data from FIFO */</span>
00407 <span class="preprocessor">#define TRACE_RTAI_EV_FIFO_CREATE_HANDLER             7   </span><span class="comment">/* Install FIFO handler */</span>
00408 <span class="preprocessor">#define TRACE_RTAI_EV_FIFO_OPEN                       8   </span><span class="comment">/* Open FIFO */</span>
00409 <span class="preprocessor">#define TRACE_RTAI_EV_FIFO_RELEASE                    9   </span><span class="comment">/* Release FIFO */</span>
00410 <span class="preprocessor">#define TRACE_RTAI_EV_FIFO_READ                      10   </span><span class="comment">/* Read from FIFO */</span>
00411 <span class="preprocessor">#define TRACE_RTAI_EV_FIFO_WRITE                     11   </span><span class="comment">/* Write to FIFO */</span>
00412 <span class="preprocessor">#define TRACE_RTAI_EV_FIFO_READ_TIMED                12   </span><span class="comment">/* Read with time limit */</span>
00413 <span class="preprocessor">#define TRACE_RTAI_EV_FIFO_WRITE_TIMED               13   </span><span class="comment">/* Write with time limit */</span>
00414 <span class="preprocessor">#define TRACE_RTAI_EV_FIFO_READ_ALLATONCE            14   </span><span class="comment">/* Read all the data from FIFO */</span>
00415 <span class="preprocessor">#define TRACE_RTAI_EV_FIFO_LLSEEK                    15   </span><span class="comment">/* Seek position into FIFO */</span>
00416 <span class="preprocessor">#define TRACE_RTAI_EV_FIFO_FASYNC                    16   </span><span class="comment">/* Asynchronous notification */</span>
00417 <span class="preprocessor">#define TRACE_RTAI_EV_FIFO_IOCTL                     17   </span><span class="comment">/* IO control on FIFO */</span>
00418 <span class="preprocessor">#define TRACE_RTAI_EV_FIFO_POLL                      18   </span><span class="comment">/* Poll FIFO */</span>
00419 <span class="preprocessor">#define TRACE_RTAI_EV_FIFO_SUSPEND_TIMED             19   </span><span class="comment">/* Suspend task for given period */</span>
00420 <span class="preprocessor">#define TRACE_RTAI_EV_FIFO_SET_ASYNC_SIG             20   </span><span class="comment">/* Set asynchrounous signal */</span>
00421 <span class="preprocessor">#define TRACE_RTAI_EV_FIFO_SEM_INIT                  21   </span><span class="comment">/* Initialize semaphore */</span>
00422 <span class="preprocessor">#define TRACE_RTAI_EV_FIFO_SEM_POST                  22   </span><span class="comment">/* Post semaphore */</span>
00423 <span class="preprocessor">#define TRACE_RTAI_EV_FIFO_SEM_WAIT                  23   </span><span class="comment">/* Wait on semaphore */</span>
00424 <span class="preprocessor">#define TRACE_RTAI_EV_FIFO_SEM_TRY_WAIT              24   </span><span class="comment">/* Try waiting on semaphore */</span>
00425 <span class="preprocessor">#define TRACE_RTAI_EV_FIFO_SEM_TIMED_WAIT            25   </span><span class="comment">/* Wait on semaphore until a certain time */</span>
00426 <span class="preprocessor">#define TRACE_RTAI_EV_FIFO_SEM_DESTROY               26   </span><span class="comment">/* Destroy semaphore  */</span>
00427 <span class="keyword">typedef</span> <span class="keyword">struct </span>_trace_rtai_fifo
00428 {
00429   uint8_t   event_sub_id;  <span class="comment">/* FIFO event ID */</span>
00430   uint32_t  event_data1;   <span class="comment">/* Event data 1 */</span>
00431   uint32_t  event_data2;   <span class="comment">/* Event data 2 */</span>
00432 } LTT_PACKED_STRUCT trace_rtai_fifo;
00433 <span class="preprocessor">#define TRACE_RTAI_FIFO(ID, DATA1, DATA2) \</span>
00434 <span class="preprocessor">           do \</span>
00435 <span class="preprocessor">           {\</span>
00436 <span class="preprocessor">           trace_rtai_fifo fifo_event; \</span>
00437 <span class="preprocessor">           fifo_event.event_sub_id = (uint8_t)  ID; \</span>
00438 <span class="preprocessor">           fifo_event.event_data1  = (uint32_t) DATA1; \</span>
00439 <span class="preprocessor">           fifo_event.event_data2  = (uint32_t) DATA2; \</span>
00440 <span class="preprocessor">           rt_trace_event(TRACE_RTAI_EV_FIFO, &amp;fifo_event); \</span>
00441 <span class="preprocessor">           } while(0)</span>
00442 <span class="preprocessor"></span>
00443 <span class="comment">/*  TRACE_RTAI_SHM */</span>
00444 <span class="preprocessor">#define TRACE_RTAI_EV_SHM_MALLOC                       1  </span><span class="comment">/* Allocate shared memory */</span>
00445 <span class="preprocessor">#define TRACE_RTAI_EV_SHM_KMALLOC                      2  </span><span class="comment">/* Allocate shared memory in kernel space */</span>
00446 <span class="preprocessor">#define TRACE_RTAI_EV_SHM_GET_SIZE                     3  </span><span class="comment">/* Get the size of the shared memory area */</span> 
00447 <span class="preprocessor">#define TRACE_RTAI_EV_SHM_FREE                         4  </span><span class="comment">/* Free shared memory */</span>
00448 <span class="preprocessor">#define TRACE_RTAI_EV_SHM_KFREE                        5  </span><span class="comment">/* Free kernel space shared memory */</span>
00449 <span class="keyword">typedef</span> <span class="keyword">struct </span>_trace_rtai_shm
00450 {
00451   uint8_t   event_sub_id;  <span class="comment">/* SHared Memory event ID */</span>
00452   uint32_t  event_data1;   <span class="comment">/* Event data 1 */</span>
00453   uint32_t  event_data2;   <span class="comment">/* Event data 2 */</span>
00454   uint32_t  event_data3;   <span class="comment">/* Event data 3 */</span>
00455 } LTT_PACKED_STRUCT trace_rtai_shm;
00456 <span class="preprocessor">#define TRACE_RTAI_SHM(ID, DATA1, DATA2, DATA3) \</span>
00457 <span class="preprocessor">           do \</span>
00458 <span class="preprocessor">           {\</span>
00459 <span class="preprocessor">           trace_rtai_shm shm_event; \</span>
00460 <span class="preprocessor">           shm_event.event_sub_id = (uint8_t)  ID; \</span>
00461 <span class="preprocessor">           shm_event.event_data1  = (uint32_t) DATA1; \</span>
00462 <span class="preprocessor">           shm_event.event_data2  = (uint32_t) DATA2; \</span>
00463 <span class="preprocessor">           shm_event.event_data3  = (uint32_t) DATA3; \</span>
00464 <span class="preprocessor">           rt_trace_event(TRACE_RTAI_EV_SHM, &amp;shm_event); \</span>
00465 <span class="preprocessor">           } while(0)</span>
00466 <span class="preprocessor"></span>
00467 <span class="comment">/*  TRACE_RTAI_POSIX */</span>
00468 <span class="preprocessor">#define TRACE_RTAI_EV_POSIX_MQ_OPEN                       1  </span><span class="comment">/* Open/create message queue */</span>
00469 <span class="preprocessor">#define TRACE_RTAI_EV_POSIX_MQ_CLOSE                      2  </span><span class="comment">/* Close message queue */</span>
00470 <span class="preprocessor">#define TRACE_RTAI_EV_POSIX_MQ_SEND                       3  </span><span class="comment">/* Send message to queue */</span>
00471 <span class="preprocessor">#define TRACE_RTAI_EV_POSIX_MQ_RECV                       4  </span><span class="comment">/* Receive message from queue */</span>
00472 <span class="preprocessor">#define TRACE_RTAI_EV_POSIX_MQ_GET_ATTR                   5  </span><span class="comment">/* Get message queue attributes */</span>
00473 <span class="preprocessor">#define TRACE_RTAI_EV_POSIX_MQ_SET_ATTR                   6  </span><span class="comment">/* Set message queue attributes */</span>
00474 <span class="preprocessor">#define TRACE_RTAI_EV_POSIX_MQ_NOTIFY                     7  </span><span class="comment">/* Register to be notified of message arrival */</span>
00475 <span class="preprocessor">#define TRACE_RTAI_EV_POSIX_MQ_UNLINK                     8  </span><span class="comment">/* Destroy message queue */</span>
00476 <span class="preprocessor">#define TRACE_RTAI_EV_POSIX_PTHREAD_CREATE                9  </span><span class="comment">/* Create RT task */</span>
00477 <span class="preprocessor">#define TRACE_RTAI_EV_POSIX_PTHREAD_EXIT                 10  </span><span class="comment">/* Terminate calling thread */</span>
00478 <span class="preprocessor">#define TRACE_RTAI_EV_POSIX_PTHREAD_SELF                 11  </span><span class="comment">/* Get thread ID */</span>
00479 <span class="preprocessor">#define TRACE_RTAI_EV_POSIX_PTHREAD_ATTR_INIT            12  </span><span class="comment">/* Initialize thread attribute */</span>
00480 <span class="preprocessor">#define TRACE_RTAI_EV_POSIX_PTHREAD_ATTR_DESTROY         13  </span><span class="comment">/* Destroy thread attribute */</span>
00481 <span class="preprocessor">#define TRACE_RTAI_EV_POSIX_PTHREAD_ATTR_SETDETACHSTATE  14  </span><span class="comment">/* Set detach state of thread */</span>
00482 <span class="preprocessor">#define TRACE_RTAI_EV_POSIX_PTHREAD_ATTR_GETDETACHSTATE  15  </span><span class="comment">/* Get detach state of thread */</span>
00483 <span class="preprocessor">#define TRACE_RTAI_EV_POSIX_PTHREAD_ATTR_SETSCHEDPARAM   16  </span><span class="comment">/* Set thread scheduling parameters */</span>
00484 <span class="preprocessor">#define TRACE_RTAI_EV_POSIX_PTHREAD_ATTR_GETSCHEDPARAM   17  </span><span class="comment">/* Get thread scheduling parameters */</span>
00485 <span class="preprocessor">#define TRACE_RTAI_EV_POSIX_PTHREAD_ATTR_SETSCHEDPOLICY  18  </span><span class="comment">/* Set thread scheduling policy */</span>
00486 <span class="preprocessor">#define TRACE_RTAI_EV_POSIX_PTHREAD_ATTR_GETSCHEDPOLICY  19  </span><span class="comment">/* Get thread scheduling policy */</span>
00487 <span class="preprocessor">#define TRACE_RTAI_EV_POSIX_PTHREAD_ATTR_SETINHERITSCHED 20  </span><span class="comment">/* Set thread scheduling inheritance */</span>
00488 <span class="preprocessor">#define TRACE_RTAI_EV_POSIX_PTHREAD_ATTR_GETINHERITSCHED 21  </span><span class="comment">/* Get thread scheduling inheritance */</span>
00489 <span class="preprocessor">#define TRACE_RTAI_EV_POSIX_PTHREAD_ATTR_SETSCOPE        22  </span><span class="comment">/* Set thread scheduling scope */</span>
00490 <span class="preprocessor">#define TRACE_RTAI_EV_POSIX_PTHREAD_ATTR_GETSCOPE        23  </span><span class="comment">/* Get thread scheduling scope */</span>
00491 <span class="preprocessor">#define TRACE_RTAI_EV_POSIX_PTHREAD_SCHED_YIELD          24  </span><span class="comment">/* Yield processor control */</span>
00492 <span class="preprocessor">#define TRACE_RTAI_EV_POSIX_PTHREAD_CLOCK_GETTIME        25  </span><span class="comment">/* Get current clock count */</span>
00493 <span class="preprocessor">#define TRACE_RTAI_EV_POSIX_PTHREAD_MUTEX_INIT           26  </span><span class="comment">/* Initialize mutex */</span>
00494 <span class="preprocessor">#define TRACE_RTAI_EV_POSIX_PTHREAD_MUTEX_DESTROY        27  </span><span class="comment">/* Destroy mutex */</span>
00495 <span class="preprocessor">#define TRACE_RTAI_EV_POSIX_PTHREAD_MUTEXATTR_INIT       28  </span><span class="comment">/* Initiatize mutex attribute */</span>
00496 <span class="preprocessor">#define TRACE_RTAI_EV_POSIX_PTHREAD_MUTEXATTR_DESTROY    29  </span><span class="comment">/* Destroy mutex attribute */</span>
00497 <span class="preprocessor">#define TRACE_RTAI_EV_POSIX_PTHREAD_MUTEXATTR_SETKIND_NP 30  </span><span class="comment">/* Set kind of attribute */</span>
00498 <span class="preprocessor">#define TRACE_RTAI_EV_POSIX_PTHREAD_MUTEXATTR_GETKIND_NP 31  </span><span class="comment">/* Get kind of attribute */</span>
00499 <span class="preprocessor">#define TRACE_RTAI_EV_POSIX_PTHREAD_SETSCHEDPARAM        32  </span><span class="comment">/* Set scheduling parameters */</span>
00500 <span class="preprocessor">#define TRACE_RTAI_EV_POSIX_PTHREAD_GETSCHEDPARAM        33  </span><span class="comment">/* Get scheduling parameters */</span>
00501 <span class="preprocessor">#define TRACE_RTAI_EV_POSIX_PTHREAD_MUTEX_TRY_LOCK       34  </span><span class="comment">/* Non-blocking mutex lock */</span>
00502 <span class="preprocessor">#define TRACE_RTAI_EV_POSIX_PTHREAD_MUTEX_LOCK           35  </span><span class="comment">/* Blocking mutex lock */</span>
00503 <span class="preprocessor">#define TRACE_RTAI_EV_POSIX_PTHREAD_MUTEX_UNLOCK         36  </span><span class="comment">/* Mutex unlock */</span>
00504 <span class="preprocessor">#define TRACE_RTAI_EV_POSIX_PTHREAD_COND_INIT            37  </span><span class="comment">/* Initialize conditionnal variable */</span>
00505 <span class="preprocessor">#define TRACE_RTAI_EV_POSIX_PTHREAD_COND_DESTROY         38  </span><span class="comment">/* Destroy cond. variable */</span>
00506 <span class="preprocessor">#define TRACE_RTAI_EV_POSIX_PTHREAD_CONDATTR_INIT        39  </span><span class="comment">/* Initialize cond. attribute variable */</span>
00507 <span class="preprocessor">#define TRACE_RTAI_EV_POSIX_PTHREAD_CONDATTR_DESTROY     40  </span><span class="comment">/* Destroy cond. attribute variable */</span>
00508 <span class="preprocessor">#define TRACE_RTAI_EV_POSIX_PTHREAD_COND_WAIT            41  </span><span class="comment">/* Wait for cond. variable to be signaled */</span>
00509 <span class="preprocessor">#define TRACE_RTAI_EV_POSIX_PTHREAD_COND_TIMEDWAIT       42  </span><span class="comment">/* Wait for a certain time */</span>
00510 <span class="preprocessor">#define TRACE_RTAI_EV_POSIX_PTHREAD_COND_SIGNAL          43  </span><span class="comment">/* Signal a waiting thread */</span>
00511 <span class="preprocessor">#define TRACE_RTAI_EV_POSIX_PTHREAD_COND_BROADCAST       44  </span><span class="comment">/* Signal all waiting threads */</span>
00512 <span class="keyword">typedef</span> <span class="keyword">struct </span>_trace_rtai_posix
00513 {
00514   uint8_t   event_sub_id;  <span class="comment">/* POSIX event ID */</span>
00515   uint32_t  event_data1;   <span class="comment">/* Event data 1 */</span>
00516   uint32_t  event_data2;   <span class="comment">/* Event data 2 */</span>
00517   uint32_t  event_data3;   <span class="comment">/* Event data 3 */</span>
00518 } LTT_PACKED_STRUCT trace_rtai_posix;
00519 <span class="preprocessor">#define TRACE_RTAI_POSIX(ID, DATA1, DATA2, DATA3) \</span>
00520 <span class="preprocessor">           do \</span>
00521 <span class="preprocessor">           {\</span>
00522 <span class="preprocessor">           trace_rtai_posix posix_event; \</span>
00523 <span class="preprocessor">           posix_event.event_sub_id = (uint8_t)  ID; \</span>
00524 <span class="preprocessor">           posix_event.event_data1  = (uint32_t) DATA1; \</span>
00525 <span class="preprocessor">           posix_event.event_data2  = (uint32_t) DATA2; \</span>
00526 <span class="preprocessor">           posix_event.event_data3  = (uint32_t) DATA3; \</span>
00527 <span class="preprocessor">           rt_trace_event(TRACE_RTAI_EV_POSIX, &amp;posix_event); \</span>
00528 <span class="preprocessor">           } while(0)</span>
00529 <span class="preprocessor"></span>
00530 <span class="comment">/*  TRACE_RTAI_LXRT */</span>
00531 <span class="preprocessor">#define TRACE_RTAI_EV_LXRT_RTAI_SYSCALL_ENTRY             1  </span><span class="comment">/* Entry in LXRT syscall */</span>
00532 <span class="preprocessor">#define TRACE_RTAI_EV_LXRT_RTAI_SYSCALL_EXIT              2  </span><span class="comment">/* Exit from LXRT syscall */</span>
00533 <span class="preprocessor">#define TRACE_RTAI_EV_LXCHANGE                   3  </span><span class="comment">/* Scheduling change */</span>
00534 <span class="preprocessor">#define TRACE_RTAI_EV_LXRT_STEAL_TASK                     4  </span><span class="comment">/* Take task control from Linux */</span>
00535 <span class="preprocessor">#define TRACE_RTAI_EV_LXRT_GIVE_BACK_TASK                 5  </span><span class="comment">/* Give task control back to Linux */</span>
00536 <span class="preprocessor">#define TRACE_RTAI_EV_LXRT_SUSPEND                        6  </span><span class="comment">/* Suspend a task */</span>
00537 <span class="preprocessor">#define TRACE_RTAI_EV_LXRT_RESUME                         7  </span><span class="comment">/* Resume task's execution */</span>
00538 <span class="preprocessor">#define TRACE_RTAI_EV_LXRT_HANDLE                         8  </span><span class="comment">/* Handle a request for an RTAI service */</span>
00539 <span class="keyword">typedef</span> <span class="keyword">struct </span>_trace_rtai_lxrt
00540 {
00541   uint8_t   event_sub_id;  <span class="comment">/* LXRT event ID */</span>
00542   uint32_t  event_data1;   <span class="comment">/* Event data 1 */</span>
00543   uint32_t  event_data2;   <span class="comment">/* Event data 2 */</span>
00544   uint32_t  event_data3;   <span class="comment">/* Event data 3 */</span>  
00545 } LTT_PACKED_STRUCT trace_rtai_lxrt;
00546 <span class="preprocessor">#define TRACE_RTAI_LXRT(ID, DATA1, DATA2, DATA3) \</span>
00547 <span class="preprocessor">           do \</span>
00548 <span class="preprocessor">           {\</span>
00549 <span class="preprocessor">           trace_rtai_lxrt lxrt_event; \</span>
00550 <span class="preprocessor">           lxrt_event.event_sub_id = (uint8_t)  ID; \</span>
00551 <span class="preprocessor">           lxrt_event.event_data1  = (uint32_t) DATA1; \</span>
00552 <span class="preprocessor">           lxrt_event.event_data2  = (uint32_t) DATA2; \</span>
00553 <span class="preprocessor">           lxrt_event.event_data3  = (uint32_t) DATA3; \</span>
00554 <span class="preprocessor">           rt_trace_event(TRACE_RTAI_EV_LXRT, &amp;lxrt_event); \</span>
00555 <span class="preprocessor">           } while(0)</span>
00556 <span class="preprocessor"></span>
00557 <span class="comment">/*  TRACE_RTAI_LXRTI */</span>
00558 <span class="preprocessor">#define TRACE_RTAI_EV_LXRTI_NAME_ATTACH                    1  </span><span class="comment">/* Register current process as name */</span>
00559 <span class="preprocessor">#define TRACE_RTAI_EV_LXRTI_NAME_LOCATE                    2  </span><span class="comment">/* Locate a given process usint it's name */</span>
00560 <span class="preprocessor">#define TRACE_RTAI_EV_LXRTI_NAME_DETACH                    3  </span><span class="comment">/* Detach process from name */</span>
00561 <span class="preprocessor">#define TRACE_RTAI_EV_LXRTI_SEND                           4  </span><span class="comment">/* Send message to PID */</span>
00562 <span class="preprocessor">#define TRACE_RTAI_EV_LXRTI_RECV                           5  </span><span class="comment">/* Receive message */</span>
00563 <span class="preprocessor">#define TRACE_RTAI_EV_LXRTI_CRECV                          6  </span><span class="comment">/* Non-blocking receive */</span>
00564 <span class="preprocessor">#define TRACE_RTAI_EV_LXRTI_REPLY                          7  </span><span class="comment">/* Reply to message received */</span>
00565 <span class="preprocessor">#define TRACE_RTAI_EV_LXRTI_PROXY_ATTACH                   8  </span><span class="comment">/* Attach proxy to process */</span>
00566 <span class="preprocessor">#define TRACE_RTAI_EV_LXRTI_PROXY_DETACH                   9  </span><span class="comment">/* Detach proxy from process */</span>
00567 <span class="preprocessor">#define TRACE_RTAI_EV_LXRTI_TRIGGER                       10  </span><span class="comment">/* Trigger proxy */</span>
00568 <span class="keyword">typedef</span> <span class="keyword">struct </span>_trace_rtai_lxrti
00569 {
00570   uint8_t   event_sub_id;  <span class="comment">/* LXRT event ID */</span>
00571   uint32_t  event_data1;   <span class="comment">/* Event data 1 */</span>
00572   uint32_t  event_data2;   <span class="comment">/* Event data 2 */</span>
00573   uint64_t  event_data3;   <span class="comment">/* Event data 3 */</span>  
00574 } LTT_PACKED_STRUCT trace_rtai_lxrti;
00575 <span class="preprocessor">#define TRACE_RTAI_LXRTI(ID, DATA1, DATA2, DATA3) \</span>
00576 <span class="preprocessor">           do \</span>
00577 <span class="preprocessor">           {\</span>
00578 <span class="preprocessor">           trace_rtai_lxrti lxrti_event; \</span>
00579 <span class="preprocessor">           lxrti_event.event_sub_id = (uint8_t)  ID; \</span>
00580 <span class="preprocessor">           lxrti_event.event_data1  = (uint32_t) DATA1; \</span>
00581 <span class="preprocessor">           lxrti_event.event_data2  = (uint32_t) DATA2; \</span>
00582 <span class="preprocessor">           lxrti_event.event_data3  = (uint64_t) DATA3; \</span>
00583 <span class="preprocessor">           rt_trace_event(TRACE_RTAI_EV_LXRTI, &amp;lxrti_event); \</span>
00584 <span class="preprocessor">           } while(0)</span>
00585 <span class="preprocessor"></span>
00586 <span class="preprocessor">#else </span><span class="comment">/* !(CONFIG_RTAI_TRACE &amp;&amp; __KERNEL__) */</span>
00587 <span class="preprocessor">#define RT_TRACE_EVENT(ID, DATA)</span>
00588 <span class="preprocessor"></span><span class="preprocessor">#define TRACE_RTAI_MOUNT()</span>
00589 <span class="preprocessor"></span><span class="preprocessor">#define TRACE_RTAI_UMOUNT()</span>
00590 <span class="preprocessor"></span><span class="preprocessor">#define TRACE_RTAI_GLOBAL_IRQ_ENTRY(ID,X)</span>
00591 <span class="preprocessor"></span><span class="preprocessor">#define TRACE_RTAI_GLOBAL_IRQ_EXIT()</span>
00592 <span class="preprocessor"></span><span class="preprocessor">#define TRACE_RTAI_OWN_IRQ_ENTRY(ID)</span>
00593 <span class="preprocessor"></span><span class="preprocessor">#define TRACE_RTAI_OWN_IRQ_EXIT()</span>
00594 <span class="preprocessor"></span><span class="preprocessor">#define TRACE_RTAI_TRAP_ENTRY(ID,ADDR)</span>
00595 <span class="preprocessor"></span><span class="preprocessor">#define TRACE_RTAI_TRAP_EXIT()</span>
00596 <span class="preprocessor"></span><span class="preprocessor">#if CONFIG_PPC || CONFIG_ARM</span>
00597 <span class="preprocessor"></span><span class="preprocessor">#define TRACE_RTAI_SRQ_ENTRY(ID,KERNEL)</span>
00598 <span class="preprocessor"></span><span class="preprocessor">#else</span>
00599 <span class="preprocessor"></span><span class="preprocessor">#define TRACE_RTAI_SRQ_ENTRY(a)</span>
00600 <span class="preprocessor"></span><span class="preprocessor">#endif</span>
00601 <span class="preprocessor"></span><span class="preprocessor">#define TRACE_RTAI_SRQ_EXIT()</span>
00602 <span class="preprocessor"></span><span class="preprocessor">#define TRACE_RTAI_SWITCHTO_LINUX(ID)</span>
00603 <span class="preprocessor"></span><span class="preprocessor">#define TRACE_RTAI_SWITCHTO_RT(ID)</span>
00604 <span class="preprocessor"></span><span class="preprocessor">#define TRACE_RTAI_SCHED_CHANGE(OUT, IN, OUT_STATE)</span>
00605 <span class="preprocessor"></span><span class="preprocessor">#define TRACE_RTAI_TASK(ID, DATA1, DATA2, DATA3)</span>
00606 <span class="preprocessor"></span><span class="preprocessor">#define TRACE_RTAI_TIMER(ID, DATA1, DATA2)</span>
00607 <span class="preprocessor"></span><span class="preprocessor">#define TRACE_RTAI_SEM(ID, DATA1, DATA2)</span>
00608 <span class="preprocessor"></span><span class="preprocessor">#define TRACE_RTAI_MSG(ID, DATA1, DATA2, DATA3)</span>
00609 <span class="preprocessor"></span><span class="preprocessor">#define TRACE_RTAI_RPC(ID, DATA1, DATA2, DATA3)</span>
00610 <span class="preprocessor"></span><span class="preprocessor">#define TRACE_RTAI_MBX(ID, DATA1, DATA2, DATA3)</span>
00611 <span class="preprocessor"></span><span class="preprocessor">#define TRACE_RTAI_FIFO(ID, DATA1, DATA2)</span>
00612 <span class="preprocessor"></span><span class="preprocessor">#define TRACE_RTAI_SHM(ID, DATA1, DATA2, DATA3)</span>
00613 <span class="preprocessor"></span><span class="preprocessor">#define TRACE_RTAI_POSIX(ID, DATA1, DATA2, DATA3)</span>
00614 <span class="preprocessor"></span><span class="preprocessor">#define TRACE_RTAI_LXRT(ID, DATA1, DATA2, DATA3)</span>
00615 <span class="preprocessor"></span><span class="preprocessor">#define TRACE_RTAI_LXRTI(ID, DATA1, DATA2, DATA3)</span>
00616 <span class="preprocessor"></span><span class="preprocessor">#endif </span><span class="comment">/* CONFIG_RTAI_TRACE &amp;&amp; __KERNEL__ */</span>
00617 
00618 <span class="preprocessor">#endif </span><span class="comment">/* !_RTAI_TRACE_H */</span>
</pre></div><hr size="1"><address style="align: right;"><small>Generated on Tue Jan 18 22:53:52 2005 for RTAI API by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border="0"></a> 1.3.9.1 </small></address>
</body>
</html>
